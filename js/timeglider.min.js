/*

 Underscore.js 1.1.4
 (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
 Underscore is freely distributable under the MIT license.
 Portions of Underscore are inspired or borrowed from Prototype,
 Oliver Steele's Functional, and John Resig's Micro-Templating.
 For all details and documentation:
 http://documentcloud.github.com/underscore
*/
(function(){var f=this,s=f._,u={},q=Array.prototype,y=Object.prototype,e=q.slice,n=q.unshift,p=y.toString,h=y.hasOwnProperty,m=q.forEach,c=q.map,d=q.reduce,j=q.reduceRight,a=q.filter,g=q.every,G=q.some,z=q.indexOf,P=q.lastIndexOf,y=Array.isArray,M=Object.keys,k=function(a){return new w(a)};typeof module!=="undefined"&&module.exports?(module.exports=k,k._=k):f._=k;k.VERSION="1.1.4";var K=k.each=k.forEach=function(a,c,g){if(a!=null)if(m&&a.forEach===m)a.forEach(c,g);else if(k.isNumber(a.length))for(var d=
0,f=a.length;d<f;d++){if(c.call(g,a[d],d,a)===u)break}else for(d in a)if(h.call(a,d)&&c.call(g,a[d],d,a)===u)break};k.map=function(a,g,d){var f=[];if(a==null)return f;if(c&&a.map===c)return a.map(g,d);K(a,function(a,c,B){f[f.length]=g.call(d,a,c,B)});return f};k.reduce=k.foldl=k.inject=function(a,c,g,f){var o=g!==void 0;a==null&&(a=[]);if(d&&a.reduce===d)return f&&(c=k.bind(c,f)),o?a.reduce(c,g):a.reduce(c);K(a,function(a,B,d){!o&&B===0?(g=a,o=!0):g=c.call(f,g,a,B,d)});if(!o)throw new TypeError("Reduce of empty array with no initial value");
return g};k.reduceRight=k.foldr=function(a,c,g,d){a==null&&(a=[]);if(j&&a.reduceRight===j)return d&&(c=k.bind(c,d)),g!==void 0?a.reduceRight(c,g):a.reduceRight(c);a=(k.isArray(a)?a.slice():k.toArray(a)).reverse();return k.reduce(a,c,g,d)};k.find=k.detect=function(a,c,g){var d;L(a,function(a,B,f){if(c.call(g,a,B,f))return d=a,!0});return d};k.filter=k.select=function(c,g,d){var f=[];if(c==null)return f;if(a&&c.filter===a)return c.filter(g,d);K(c,function(a,c,B){g.call(d,a,c,B)&&(f[f.length]=a)});return f};
k.reject=function(a,c,g){var d=[];if(a==null)return d;K(a,function(a,B,f){c.call(g,a,B,f)||(d[d.length]=a)});return d};k.every=k.all=function(a,c,d){var c=c||k.identity,f=!0;if(a==null)return f;if(g&&a.every===g)return a.every(c,d);K(a,function(a,B,g){if(!(f=f&&c.call(d,a,B,g)))return u});return f};var L=k.some=k.any=function(a,c,g){var c=c||k.identity,d=!1;if(a==null)return d;if(G&&a.some===G)return a.some(c,g);K(a,function(a,B,f){if(d=c.call(g,a,B,f))return u});return d};k.include=k.contains=function(a,
c){var g=!1;if(a==null)return g;if(z&&a.indexOf===z)return a.indexOf(c)!=-1;L(a,function(a){if(g=a===c)return!0});return g};k.invoke=function(a,c){var g=e.call(arguments,2);return k.map(a,function(a){return(c?a[c]:a).apply(a,g)})};k.pluck=function(a,c){return k.map(a,function(a){return a[c]})};k.max=function(a,c,g){if(!c&&k.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};K(a,function(a,B,f){B=c?c.call(g,a,B,f):a;B>=d.computed&&(d={value:a,computed:B})});return d.value};k.min=function(a,
c,g){if(!c&&k.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};K(a,function(a,B,f){B=c?c.call(g,a,B,f):a;B<d.computed&&(d={value:a,computed:B})});return d.value};k.sortBy=function(a,c,g){return k.pluck(k.map(a,function(a,d,B){return{value:a,criteria:c.call(g,a,d,B)}}).sort(function(a,c){var g=a.criteria,d=c.criteria;return g<d?-1:g>d?1:0}),"value")};k.sortedIndex=function(a,c,g){for(var g=g||k.identity,d=0,f=a.length;d<f;){var o=d+f>>1;g(a[o])<g(c)?d=o+1:f=o}return d};k.toArray=
function(a){if(!a)return[];if(a.toArray)return a.toArray();if(k.isArray(a))return a;if(k.isArguments(a))return e.call(a);return k.values(a)};k.size=function(a){return k.toArray(a).length};k.first=k.head=function(a,c,g){return c&&!g?e.call(a,0,c):a[0]};k.rest=k.tail=function(a,c,g){return e.call(a,k.isUndefined(c)||g?1:c)};k.last=function(a){return a[a.length-1]};k.compact=function(a){return k.filter(a,function(a){return!!a})};k.flatten=function(a){return k.reduce(a,function(a,c){if(k.isArray(c))return a.concat(k.flatten(c));
a[a.length]=c;return a},[])};k.without=function(a){var c=e.call(arguments,1);return k.filter(a,function(a){return!k.include(c,a)})};k.uniq=k.unique=function(a,c){return k.reduce(a,function(a,g,d){if(0==d||(c===!0?k.last(a)!=g:!k.include(a,g)))a[a.length]=g;return a},[])};k.intersect=function(a){var c=e.call(arguments,1);return k.filter(k.uniq(a),function(a){return k.every(c,function(c){return k.indexOf(c,a)>=0})})};k.zip=function(){for(var a=e.call(arguments),c=k.max(k.pluck(a,"length")),g=Array(c),
d=0;d<c;d++)g[d]=k.pluck(a,""+d);return g};k.indexOf=function(a,c,g){if(a==null)return-1;if(g)return g=k.sortedIndex(a,c),a[g]===c?g:-1;if(z&&a.indexOf===z)return a.indexOf(c);for(var g=0,d=a.length;g<d;g++)if(a[g]===c)return g;return-1};k.lastIndexOf=function(a,c){if(a==null)return-1;if(P&&a.lastIndexOf===P)return a.lastIndexOf(c);for(var g=a.length;g--;)if(a[g]===c)return g;return-1};k.range=function(a,c,g){for(var d=e.call(arguments),f=d.length<=1,a=f?0:d[0],c=f?d[0]:d[1],g=d[2]||1,d=Math.max(Math.ceil((c-
a)/g),0),f=0,o=Array(d);f<d;)o[f++]=a,a+=g;return o};k.bind=function(a,c){var g=e.call(arguments,2);return function(){return a.apply(c||{},g.concat(e.call(arguments)))}};k.bindAll=function(a){var c=e.call(arguments,1);c.length==0&&(c=k.functions(a));K(c,function(c){a[c]=k.bind(a[c],a)});return a};k.memoize=function(a,c){var g={},c=c||k.identity;return function(){var d=c.apply(this,arguments);return d in g?g[d]:g[d]=a.apply(this,arguments)}};k.delay=function(a,c){var g=e.call(arguments,2);return setTimeout(function(){return a.apply(a,
g)},c)};k.defer=function(a){return k.delay.apply(k,[a,1].concat(e.call(arguments,1)))};var v=function(a,c,g){var d;return function(){var f=this,o=arguments,e=function(){d=null;a.apply(f,o)};g&&clearTimeout(d);if(g||!d)d=setTimeout(e,c)}};k.throttle=function(a,c){return v(a,c,!1)};k.debounce=function(a,c){return v(a,c,!0)};k.wrap=function(a,c){return function(){var g=[a].concat(e.call(arguments));return c.apply(this,g)}};k.compose=function(){var a=e.call(arguments);return function(){for(var c=e.call(arguments),
g=a.length-1;g>=0;g--)c=[a[g].apply(this,c)];return c[0]}};k.keys=M||function(a){if(k.isArray(a))return k.range(0,a.length);var c=[],g;for(g in a)h.call(a,g)&&(c[c.length]=g);return c};k.values=function(a){return k.map(a,k.identity)};k.functions=k.methods=function(a){return k.filter(k.keys(a),function(c){return k.isFunction(a[c])}).sort()};k.extend=function(a){K(e.call(arguments,1),function(c){for(var g in c)a[g]=c[g]});return a};k.clone=function(a){return k.isArray(a)?a.slice():k.extend({},a)};k.tap=
function(a,c){c(a);return a};k.isEqual=function(a,c){if(a===c)return!0;var g=typeof a;if(g!=typeof c)return!1;if(a==c)return!0;if(!a&&c||a&&!c)return!1;if(a._chain)a=a._wrapped;if(c._chain)c=c._wrapped;if(a.isEqual)return a.isEqual(c);if(k.isDate(a)&&k.isDate(c))return a.getTime()===c.getTime();if(k.isNaN(a)&&k.isNaN(c))return!1;if(k.isRegExp(a)&&k.isRegExp(c))return a.source===c.source&&a.global===c.global&&a.ignoreCase===c.ignoreCase&&a.multiline===c.multiline;if(g!=="object")return!1;if(a.length&&
a.length!==c.length)return!1;var g=k.keys(a),d=k.keys(c);if(g.length!=d.length)return!1;for(var f in a)if(!(f in c)||!k.isEqual(a[f],c[f]))return!1;return!0};k.isEmpty=function(a){if(k.isArray(a)||k.isString(a))return a.length===0;for(var c in a)if(h.call(a,c))return!1;return!0};k.isElement=function(a){return!!(a&&a.nodeType==1)};k.isArray=y||function(a){return p.call(a)==="[object Array]"};k.isArguments=function(a){return!(!a||!h.call(a,"callee"))};k.isFunction=function(a){return!(!a||!a.constructor||
!a.call||!a.apply)};k.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)};k.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)};k.isNaN=function(a){return a!==a};k.isBoolean=function(a){return a===!0||a===!1};k.isDate=function(a){return!(!a||!a.getTimezoneOffset||!a.setUTCFullYear)};k.isRegExp=function(a){return!(!a||!a.test||!a.exec||!(a.ignoreCase||a.ignoreCase===!1))};k.isNull=function(a){return a===null};k.isUndefined=function(a){return a===void 0};k.noConflict=
function(){f._=s;return this};k.identity=function(a){return a};k.times=function(a,c,g){for(var d=0;d<a;d++)c.call(g,d)};k.mixin=function(a){K(k.functions(a),function(c){C(c,k[c]=a[c])})};var o=0;k.uniqueId=function(a){var c=o++;return a?a+c:c};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};k.template=function(a,c){var g=k.templateSettings,g="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(g.interpolate,
function(a,c){return"',"+c.replace(/\\'/g,"'")+",'"}).replace(g.evaluate||null,function(a,c){return"');"+c.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",g=new Function("obj",g);return c?g(c):g};var w=function(a){this._wrapped=a};k.prototype=w.prototype;var r=function(a,c){return c?k(a).chain():a},C=function(a,c){w.prototype[a]=function(){var a=e.call(arguments);n.call(a,this._wrapped);return r(c.apply(k,
a),this._chain)}};k.mixin(k);K(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var c=q[a];w.prototype[a]=function(){c.apply(this._wrapped,arguments);return r(this._wrapped,this._chain)}});K(["concat","join","slice"],function(a){var c=q[a];w.prototype[a]=function(){return r(c.apply(this._wrapped,arguments),this._chain)}});w.prototype.chain=function(){this._chain=!0;return this};w.prototype.value=function(){return this._wrapped}})();/*

 Backbone.js 0.3.3
 (c) 2010 Jeremy Ashkenas, DocumentCloud Inc.
 Backbone may be freely distributed under the MIT license.
 For all details and documentation:
 http://documentcloud.github.com/backbone
*/
(function(){var f;f=typeof exports!=="undefined"?exports:this.Backbone={};f.VERSION="0.3.3";var s=this._;if(!s&&typeof require!=="undefined")s=require("underscore")._;var u=this.jQuery||this.Zepto;f.emulateHTTP=!1;f.emulateJSON=!1;f.Events={bind:function(a,c){this._callbacks||(this._callbacks={});(this._callbacks[a]||(this._callbacks[a]=[])).push(c);return this},unbind:function(a,c){var d;if(a){if(d=this._callbacks)if(c){d=d[a];if(!d)return this;for(var f=0,e=d.length;f<e;f++)if(c===d[f]){d.splice(f,
1);break}}else d[a]=[]}else this._callbacks={};return this},trigger:function(a){var c,d,f,e;if(!(d=this._callbacks))return this;if(c=d[a]){f=0;for(e=c.length;f<e;f++)c[f].apply(this,Array.prototype.slice.call(arguments,1))}if(c=d.all){f=0;for(e=c.length;f<e;f++)c[f].apply(this,arguments)}return this}};f.Model=function(a,c){a||(a={});this.defaults&&(a=s.extend({},this.defaults,a));this.attributes={};this._escapedAttributes={};this.cid=s.uniqueId("c");this.set(a,{silent:!0});this._previousAttributes=
s.clone(this.attributes);if(c&&c.collection)this.collection=c.collection;this.initialize(a,c)};s.extend(f.Model.prototype,f.Events,{_previousAttributes:null,_changed:!1,initialize:function(){},toJSON:function(){return s.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.attributes[a];return this._escapedAttributes[a]=(c==null?"":c).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;")},set:function(a,c){c||(c={});if(!a)return this;if(a.attributes)a=a.attributes;var d=this.attributes,f=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return!1;if("id"in a)this.id=a.id;for(var e in a){var j=a[e];if(!s.isEqual(d[e],j)&&(d[e]=j,delete f[e],!c.silent))this._changed=!0,this.trigger("change:"+e,this,j,c)}!c.silent&&this._changed&&this.change(c);return this},unset:function(a,c){c||(c={});var d={};d[a]=void 0;if(!c.silent&&this.validate&&!this._performValidation(d,
c))return!1;delete this.attributes[a];delete this._escapedAttributes[a];if(!c.silent)this._changed=!0,this.trigger("change:"+a,this,void 0,c),this.change(c);return this},clear:function(a){a||(a={});var c=this.attributes,d={};for(attr in c)d[attr]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;this.attributes={};this._escapedAttributes={};if(!a.silent){this._changed=!0;for(attr in c)this.trigger("change:"+attr,this,void 0,a);this.change(a)}return this},fetch:function(a){a||
(a={});var c=this,d=j(a.error,c,a);(this.sync||f.sync)("read",this,function(d){if(!c.set(c.parse(d),a))return!1;a.success&&a.success(c,d)},d);return this},save:function(a,c){c||(c={});if(a&&!this.set(a,c))return!1;var d=this,e=j(c.error,d,c),h=this.isNew()?"create":"update";(this.sync||f.sync)(h,this,function(a){if(!d.set(d.parse(a),c))return!1;c.success&&c.success(d,a)},e);return this},destroy:function(a){a||(a={});var c=this,d=j(a.error,c,a);(this.sync||f.sync)("delete",this,function(d){c.collection&&
c.collection.remove(c);a.success&&a.success(c,d)},d);return this},url:function(){var a=d(this.collection);if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+this.id},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return!this.id},change:function(a){this.trigger("change",this,a);this._previousAttributes=s.clone(this.attributes);this._changed=!1},hasChanged:function(a){if(a)return this._previousAttributes[a]!=this.attributes[a];return this._changed},
changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,d=!1,f;for(f in a)s.isEqual(c[f],a[f])||(d=d||{},d[f]=a[f]);return d},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return s.clone(this._previousAttributes)},_performValidation:function(a,c){var d=this.validate(a);if(d)return c.error?c.error(this,d):this.trigger("error",this,d,c),!1;return!0}});f.Collection=function(a,c){c||(c={});
if(c.comparator)this.comparator=c.comparator,delete c.comparator;this._boundOnModelEvent=s.bind(this._onModelEvent,this);this._reset();a&&this.refresh(a,{silent:!0});this.initialize(a,c)};s.extend(f.Collection.prototype,f.Events,{model:f.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(s.isArray(a))for(var d=0,f=a.length;d<f;d++)this._add(a[d],c);else this._add(a,c);return this},remove:function(a,c){if(s.isArray(a))for(var d=0,f=
a.length;d<f;d++)this._remove(a[d],c);else this._remove(a,c);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("refresh",this,a);return this},pluck:function(a){return s.map(this.models,function(c){return c.get(a)})},
refresh:function(a,c){a||(a=[]);c||(c={});this._reset();this.add(a,{silent:!0});c.silent||this.trigger("refresh",this,c);return this},fetch:function(a){a||(a={});var c=this,d=j(a.error,c,a);(this.sync||f.sync)("read",this,function(d){c.refresh(c.parse(d));a.success&&a.success(c,d)},d);return this},create:function(a,c){var d=this;c||(c={});a instanceof f.Model?a.collection=d:a=new this.model(a,{collection:d});return a.save(null,{success:function(a,f){d.add(a);c.success&&c.success(a,f)},error:c.error})},
parse:function(a){return a},chain:function(){return s(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_add:function(a,c){c||(c={});a instanceof f.Model||(a=new this.model(a,{collection:this}));var d=this.getByCid(a);if(d)throw Error(["Can't add the same model to a set twice",d.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;a.collection=this;this.models.splice(this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a);a.bind("all",this._boundOnModelEvent);
this.length++;c.silent||a.trigger("add",a,this,c);return a},_remove:function(a,c){c||(c={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];delete this._byCid[a.cid];delete a.collection;this.models.splice(this.indexOf(a),1);this.length--;c.silent||a.trigger("remove",a,this,c);a.unbind("all",this._boundOnModelEvent);return a},_onModelEvent:function(a,c){a==="change:id"&&(delete this._byId[c.previous("id")],this._byId[c.id]=c);this.trigger.apply(this,arguments)}});s.each(["forEach",
"each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){f.Collection.prototype[a]=function(){return s[a].apply(s,[this.models].concat(s.toArray(arguments)))}});f.Controller=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize(a)};var q=/:([\w\d]+)/g,y=/\*([\w\d]+)/g;
s.extend(f.Controller.prototype,f.Events,{initialize:function(){},route:function(a,c,d){f.history||(f.history=new f.History);s.isRegExp(a)||(a=this._routeToRegExp(a));f.history.route(a,s.bind(function(f){f=this._extractParameters(a,f);d.apply(this,f);this.trigger.apply(this,["route:"+c].concat(f))},this))},saveLocation:function(a){f.history.saveLocation(a)},_bindRoutes:function(){if(this.routes)for(var a in this.routes){var c=this.routes[a];this.route(a,c,this[c])}},_routeToRegExp:function(a){a=a.replace(q,
"([^/]*)").replace(y,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});f.History=function(){this.handlers=[];this.fragment=this.getFragment();s.bindAll(this,"checkUrl")};var e=/^#*/;s.extend(f.History.prototype,{interval:50,getFragment:function(a){return(a||window.location).hash.replace(e,"")},start:function(){var a=document.documentMode;if(a=u.browser.msie&&(!a||a<=7))this.iframe=u('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
"onhashchange"in window&&!a?u(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);return this.loadUrl()},route:function(a,c){this.handlers.push({route:a,callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;if(this.iframe)window.location.hash=this.iframe.location.hash=a;this.loadUrl()},loadUrl:function(){var a=this.fragment=
this.getFragment();return s.any(this.handlers,function(c){if(c.route.test(a))return c.callback(a),!0})},saveLocation:function(a){a=(a||"").replace(e,"");if(this.fragment!=a&&(window.location.hash=this.fragment=a,this.iframe&&a!=this.getFragment(this.iframe.location)))this.iframe.document.open().close(),this.iframe.location.hash=a}});f.View=function(a){this._configure(a||{});this._ensureElement();this.delegateEvents();this.initialize(a)};var n=/^(\w+)\s*(.*)$/;s.extend(f.View.prototype,f.Events,{tagName:"div",
$:function(a){return u(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){u(this.el).remove();return this},make:function(a,c,d){a=document.createElement(a);c&&u(a).attr(c);d&&u(a).html(d);return a},delegateEvents:function(a){if(a||(a=this.events)){u(this.el).unbind();for(var c in a){var d=a[c],f=c.match(n),e=f[1],f=f[2],d=s.bind(this[d],this);f===""?u(this.el).bind(e,d):u(this.el).delegate(f,e,d)}}},_configure:function(a){this.options&&(a=s.extend({},this.options,
a));if(a.model)this.model=a.model;if(a.collection)this.collection=a.collection;if(a.el)this.el=a.el;if(a.id)this.id=a.id;if(a.className)this.className=a.className;if(a.tagName)this.tagName=a.tagName;this.options=a},_ensureElement:function(){if(!this.el){var a={};if(this.id)a.id=this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});var p=function(a,d){var f=c(this,a,d);f.extend=p;return f};f.Model.extend=f.Collection.extend=f.Controller.extend=f.View.extend=p;var h=
{create:"POST",update:"PUT","delete":"DELETE",read:"GET"};f.sync=function(a,c,e,j){var m=h[a],a=a==="create"||a==="update"?JSON.stringify(c.toJSON()):null,c={url:d(c),type:m,contentType:"application/json",data:a,dataType:"json",processData:!1,success:e,error:j};if(f.emulateJSON)c.contentType="application/x-www-form-urlencoded",c.processData=!0,c.data=a?{model:a}:{};if(f.emulateHTTP&&(m==="PUT"||m==="DELETE")){if(f.emulateJSON)c.data._method=m;c.type="POST";c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
m)}}u.ajax(c)};var m=function(){},c=function(a,c,d){var f;f=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)};m.prototype=a.prototype;f.prototype=new m;c&&s.extend(f.prototype,c);d&&s.extend(f,d);f.prototype.constructor=f;f.__super__=a.prototype;return f},d=function(a){if(!a||!a.url)throw Error("A 'url' property or function must be specified");return s.isFunction(a.url)?a.url():a.url},j=function(a,c,d){return function(f){a?a(c,f):c.trigger("error",c,f,d)}}})();/*
 
 JavaScript Debug - v0.4 - 6/22/2010
 http://benalman.com/projects/javascript-debug-console-log/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/

 With lots of help from Paul Irish!
 http://paulirish.com/
*/
window.debug=function(){function f(c){e&&(n||!q||!q.log)&&e.apply(s,c)}for(var s=this,u=Array.prototype.slice,q=s.console,y={},e,n,p=9,h=["error","warn","info","debug","log"],m="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),c=m.length,d=[];--c>=0;)(function(c){y[c]=function(){p!==0&&q&&q[c]&&q[c].apply(q,arguments)}})(m[c]);for(c=h.length;--c>=0;)(function(c,a){y[a]=function(){var e=u.call(arguments),m=[a].concat(e);d.push(m);
f(m);if(q&&(p>0?p>c:h.length+p<=c))q.firebug?q[a].apply(s,e):q[a]?q[a](e):q.log(e)}})(c,h[c]);y.setLevel=function(c){p=typeof c==="number"?c:9};y.setCallback=function(){var c=u.call(arguments),a=d.length,g=a;e=c.shift()||null;n=typeof c[0]==="boolean"?c.shift():!1;for(g-=typeof c[0]==="number"?c.shift():a;g<a;)f(d[g++])};return y}();/*

 jQuery Templates Plugin 1.0.0pre
 http://github.com/jquery/jquery-tmpl
 Requires jQuery 1.4.2

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(f){function s(a,e,g,k){k={data:k||k===0||k===!1?k:e?e.data:{},_wrap:e?e._wrap:null,tmpl:null,parent:e||null,nodes:[],calls:h,nest:m,wrap:c,html:d,update:j};a&&f.extend(k,a,{nodes:[],parent:e});if(g)k.tmpl=g,k._ctnt=k._ctnt||k.tmpl(f,k),k.key=++K,(v.length?P:z)[K]=k;return k}function u(a,c,d){var e,d=d?f.map(d,function(c){return typeof c==="string"?a.key?c.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+a.key+'" $2'):c:u(c,a,c._ctnt)}):a;if(c)return d;d=d.join("");d.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(a,c,d,o){e=f(d).get();p(e);c&&(e=q(c).concat(e));o&&(e=e.concat(q(o)))});return e?e:q(d)}function q(a){var c=document.createElement("div");c.innerHTML=a;return f.makeArray(c.childNodes)}function y(a){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+f.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(a,c,d,e,o,g,j){a=f.tmpl.tag[d];if(!a)throw"Unknown template tag: "+d;d=a._default||[];g&&!/\w$/.test(o)&&(o+=g,g="");o?(o=n(o),j=j?","+n(j)+")":g?")":"",j=g?o.indexOf(".")>-1?o+n(g):"("+o+").call($item"+j:o,g=g?j:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):g=j=d.$1||"null";e=n(e);return"');"+a[c?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(g).split("$1").join(j).split("$2").join(e||d.$2||"")+"__.push('"})+
"');}return __;")}function e(a,c){a._wrap=u(a,!0,f.isArray(c)?c:[G.test(c)?c:f(c).html()]).join("")}function n(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function p(a){function c(a){function e(a){var i;a+=d;i=h[a]=h[a]||s(w,z[w.parent.key+d]||w.parent),w=i}var o,j=a,w,k;if(k=a.getAttribute(g)){for(;j.parentNode&&(j=j.parentNode).nodeType===1&&!(o=j.getAttribute(g)););if(o!==k){j=j.parentNode?j.nodeType===11?0:j.getAttribute(g)||0:0;if(!(w=z[k]))w=P[k],w=s(w,z[j]||P[j]),w.key=++K,
z[K]=w;L&&e(k)}a.removeAttribute(g)}else if(L&&(w=f.data(a,"tmplItem")))e(w.key),z[w.key]=w,j=(j=f.data(a.parentNode,"tmplItem"))?j.key:0;if(w){for(o=w;o&&o.key!=j;)o.nodes.push(a),o=o.parent;delete w._ctnt;delete w._wrap;f.data(a,"tmplItem",w)}}var d="_"+L,e,j,h={},k,v,m;k=0;for(v=a.length;k<v;k++)if((e=a[k]).nodeType===1){j=e.getElementsByTagName("*");for(m=j.length-1;m>=0;m--)c(j[m]);c(e)}}function h(a,c,d,f){if(!a)return v.pop();v.push({_:a,tmpl:c,item:this,data:d,options:f})}function m(a,c,d){return f.tmpl(f.template(a),
c,d,this)}function c(a,c){var d=a.options||{};d.wrapped=c;return f.tmpl(f.template(a.tmpl),a.data,d,a.item)}function d(a,c){var d=this._wrap;return f.map(f(f.isArray(d)?d.join(""):d).filter(a||"*"),function(a){if(c)a=a.innerText||a.textContent;else{var d;if(!(d=a.outerHTML))d=document.createElement("div"),d.appendChild(a.cloneNode(!0)),d=d.innerHTML;a=d}return a})}function j(){var a=this.nodes;f.tmpl(null,null,null,this).insertBefore(a[0]);f(a).remove()}var a=f.fn.domManip,g="_tmplitem",G=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,
z={},P={},M,k={key:0,data:{}},K=0,L=0,v=[];f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){f.fn[a]=function(d){var e=[],d=f(d),g,j,h;g=this.length===1&&this[0].parentNode;M=z||{};if(g&&g.nodeType===11&&g.childNodes.length===1&&d.length===1)d[c](this[0]),e=this;else{j=0;for(h=d.length;j<h;j++)L=j,g=(j>0?this.clone(!0):this).get(),f(d[j])[c](g),e=e.concat(g);L=0;e=this.pushStack(e,a,d.selector)}d=M;M=null;f.tmpl.complete(d);
return e}});f.fn.extend({tmpl:function(a,c,d){return f.tmpl(this[0],a,c,d)},tmplItem:function(){return f.tmplItem(this[0])},template:function(a){return f.template(a,this[0])},domManip:function(c,d,e){if(c[0]&&f.isArray(c[0])){for(var g=f.makeArray(arguments),j=c[0],h=j.length,k=0,v;k<h&&!(v=f.data(j[k++],"tmplItem")););v&&L&&(g[2]=function(a){f.tmpl.afterManip(this,a,e)});a.apply(this,g)}else a.apply(this,arguments);L=0;M||f.tmpl.complete(z);return this}});f.extend({tmpl:function(a,c,d,g){var j=!g;
if(j)g=k,a=f.template[a]||f.template(null,a),P={};else if(!a)return a=g.tmpl,z[g.key]=g,g.nodes=[],g.wrapped&&e(g,g.wrapped),f(u(g,null,g.tmpl(f,g)));if(!a)return[];typeof c==="function"&&(c=c.call(g||{}));d&&d.wrapped&&e(d,d.wrapped);c=f.isArray(c)?f.map(c,function(c){return c?s(d,g,a,c):null}):[s(d,g,a,c)];return j?f(u(g,null,c)):c},tmplItem:function(a){var c;for(a instanceof f&&(a=a[0]);a&&a.nodeType===1&&!(c=f.data(a,"tmplItem"))&&(a=a.parentNode););return c||k},template:function(a,c){if(c)return typeof c===
"string"?c=y(c):c instanceof f&&(c=c[0]||{}),c.nodeType&&(c=f.data(c,"tmpl")||f.data(c,"tmpl",y(c.innerHTML))),typeof a==="string"?f.template[a]=c:c;return a?typeof a!=="string"?f.template(null,a):f.template[a]||f.template(null,G.test(a)?a:f(a)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});f.extend(f.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},
open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){z={}},afterManip:function(a,
c,d){var e=c.nodeType===11?f.makeArray(c.childNodes):c.nodeType===1?[c]:[];d.call(a,c);p(e);L++}})})(jQuery);/*

 jQuery.UI.iPad plugin
 Copyright (c) 2010 Stephen von Takach
 licensed under MIT.
 Date: 27/8/2010

 Project Home: 
 http://code.google.com/p/jquery-ui-for-ipad-and-iphone/
*/
(function(f){function s(){h&&(window.clearTimeout(c),h=!1,m=null)}function u(f){h||(h=!0,m=f.changedTouches[0],c=window.setTimeout(function(){h=!1;var a=m,c=document.createEvent("MouseEvent");c.initMouseEvent("mouseup",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");c.initMouseEvent("mousedown",!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);c=document.createEvent("MouseEvent");
c.initMouseEvent("contextmenu",!0,!0,window,1,a.screenX+50,a.screenY+5,a.clientX+50,a.clientY+5,!1,!1,!1,!1,2,null);a.target.dispatchEvent(c);d=!0;m=null},800))}function q(c){var a=c.changedTouches[0],d="mouseover",f=document.createEvent("MouseEvent");f.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(f);d="mousedown";f=document.createEvent("MouseEvent");f.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,
!1,!1,0,null);a.target.dispatchEvent(f);n?(window.clearTimeout(p),a.target==e?(e=null,n=!1,d="click",f=document.createEvent("MouseEvent"),f.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(f),d="dblclick",f=document.createEvent("MouseEvent"),f.initMouseEvent(d,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(f)):(e=a.target,n=!0,p=window.setTimeout(function(){n=!1},600),u(c))):(e=a.target,
n=!0,p=window.setTimeout(function(){n=!1},600),u(c))}function y(c){var a="";if(!(c.touches.length>1)){switch(c.type){case "gesturestart":alert("gesturestart");c.preventDefault();break;case "touchstart":if(f(c.changedTouches[0].target).is("select"))return;q(c);c.preventDefault();return!1;case "touchmove":s();a="mousemove";c.preventDefault();break;case "touchend":if(d)return d=!1,c.preventDefault(),!1;s();a="mouseup";break;default:return}var c=c.changedTouches[0],g=document.createEvent("MouseEvent");
g.initMouseEvent(a,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null);c.target.dispatchEvent(g);a=="mouseup"&&n&&c.target==e&&(g=document.createEvent("MouseEvent"),g.initMouseEvent("click",!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),c.target.dispatchEvent(g))}}f.extend(f.support,{touch:typeof Touch=="object"});f.fn.addTouch=function(){f.support.touch&&this.each(function(c,a){a.addEventListener("touchstart",y,!1);a.addEventListener("touchmove",
y,!1);a.addEventListener("touchend",y,!1);a.addEventListener("touchcancel",y,!1)})};var e=null,n=!1,p=null,h=!1,m=null,c=null,d=!1})(jQuery);/*

 Raphael 1.5.2 - JavaScript Vector Library

 Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 Licensed under the MIT (http://raphaeljs.com/license.html) license.
*/
(function(){function f(){if(f.is(arguments[0],Y)){for(var x=arguments[0],a=va[z](f,x.splice(0,3+f.is(x[0],V))),T=a.set(),d=0,D=x[o];d<D;d++){var i=x[d]||{};p[c](i.type)&&T[S](a[i.type]().attr(i))}return T}return va[z](f,arguments)}function s(){for(var x=[],a=0;a<32;a++)x[a]=(~~(r.random()*16))[ea](16);x[12]=4;x[16]=(x[16]&3|8)[ea](16);return"r-"+x[v]("")}function u(x,a,T){function d(){var f=Array[m].slice.call(arguments,0),i=f[v]("\u25ba"),e=d.cache=d.cache||{},g=d.count=d.count||[];if(e[c](i))return T?
T(e[i]):e[i];g[o]>=1E3&&delete e[g.shift()];g[S](i);e[i]=x[z](a,f);return T?T(e[i]):e[i]}return d}function q(){return this.x+M+this.y}function y(x){return function(a,c,d,D){var i={back:x};f.is(d,"function")?D=d:i.rot=d;a&&a.constructor==R&&(a=a.attrs.path);a&&(i.along=a);return this.animate(i,c,D)}}function e(x,a,c,d,f,i){function e(x,a){var c,N,T,d;T=x;for(N=0;N<8;N++){d=((l*T+A)*T+g)*T-x;if(U(d)<a)return T;c=(3*l*T+2*A)*T+g;if(U(c)<1.0E-6)break;T-=d/c}c=0;N=1;T=x;if(T<c)return c;if(T>N)return N;
for(;c<N;){d=((l*T+A)*T+g)*T;if(U(d-x)<a)break;x>d?c=T:N=T;T=(N-c)/2+c}return T}var g=3*a,A=3*(d-a)-g,l=1-g-A,j=3*c,o=3*(f-c)-j,h=1-j-o;return function(x,a){var c=e(x,a);return((h*c+o)*c+j)*c}(x,1/(200*i))}f.version="1.5.2";var n=/[, ]+/,p={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},h=/\{(\d+)\}/g,m="prototype",c="hasOwnProperty",d=document,j=window,a={was:Object[m][c].call(j,"Raphael"),is:j.Raphael},g=function(){this.customAttributes={}},G,z="apply",P="createTouch"in d,M=" ",k=String,K="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(M),
L={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v="join",o="length",w=k[m].toLowerCase,r=Math,C=r.max,B=r.min,U=r.abs,H=r.pow,W=r.PI,V="number",Y="array",ea="toString",db=Object[m][ea],S="push",Ha=/^url\(['"]?([^\)]+?)['"]?\)$/i,eb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Q={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,J=r.round,E=parseFloat,aa=parseInt,fa=k[m].toUpperCase,ma={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt",
"stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},wa={along:"along",blur:V,"clip-rect":"csv",cx:V,cy:V,fill:"colour","fill-opacity":V,"font-size":V,height:V,opacity:V,path:"path",r:V,rotation:"csv",rx:V,ry:V,scale:"csv",stroke:"colour","stroke-opacity":V,"stroke-width":V,translation:"csv",width:V,x:V,y:V},fb=/^(from|to|\d+%?)$/,xa=/\s*,\s*/,gb={hs:1,rg:1},hb=/,?([achlmqrstvxz]),?/gi,
ib=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,jb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Ia=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,kb=function(x,a){return x.key-a.key};f.type=j.SVGAngle||d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(f.type=="VML"){var ba=d.createElement("div");ba.innerHTML='<v:shape adj="1"/>';ba=ba.firstChild;ba.style.behavior="url(#default#VML)";if(!(ba&&typeof ba.adj=="object"))return f.type=null;ba=null}f.svg=
!(f.vml=f.type=="VML");g[m]=f[m];G=g[m];f._id=0;f._oid=0;f.fn={};f.is=function(x,a){a=w.call(a);if(a=="finite")return!Q[c](+x);return a=="null"&&x===null||a==typeof x||a=="object"&&x===Object(x)||a=="array"&&Array.isArray&&Array.isArray(x)||db.call(x).slice(8,-1).toLowerCase()==a};f.angle=function(x,a,c,d,D,i){if(D==null){x-=c;a-=d;if(!x&&!a)return 0;return((x<0)*180+r.atan(-a/-x)*180/W+360)%360}return f.angle(x,a,D,i)-f.angle(c,d,D,i)};f.rad=function(x){return x%360*W/180};f.deg=function(x){return x*
180/W%360};f.snapTo=function(x,a,c){c=f.is(c,"finite")?c:10;if(f.is(x,Y))for(var d=x.length;d--;){if(U(x[d]-a)<=c)return x[d]}else{x=+x;d=a%x;if(d<c)return a-d;if(d>x-c)return a-d+x}return a};f.setWindow=function(x){j=x;d=j.document};var na=function(x){if(f.vml){var a=/^\s+|\s+$/g,c;try{var F=new ActiveXObject("htmlfile");F.write("<body>");F.close();c=F.body}catch(D){c=createPopup().document.body}var i=c.createTextRange();na=u(function(x){try{c.style.color=k(x).replace(a,"");var d=i.queryCommandValue("ForeColor");
return"#"+("000000"+((d&255)<<16|d&65280|(d&16711680)>>>16)[ea](16)).slice(-6)}catch(F){return"none"}})}else{var e=d.createElement("i");e.title="Rapha\u00ebl Colour Picker";e.style.display="none";d.body.appendChild(e);na=u(function(x){e.style.color=x;return d.defaultView.getComputedStyle(e,"").getPropertyValue("color")})}return na(x)},Ja=function(){return"hsb("+[this.h,this.s,this.b]+")"},lb=function(){return"hsl("+[this.h,this.s,this.l]+")"},mb=function(){return this.hex};f.hsb2rgb=function(x,a,
c,d){if(f.is(x,"object")&&"h"in x&&"s"in x&&"b"in x)c=x.b,a=x.s,x=x.h,d=x.o;return f.hsl2rgb(x,a,c/2,d)};f.hsl2rgb=function(x,a,c,d){if(f.is(x,"object")&&"h"in x&&"s"in x&&"l"in x)c=x.l,a=x.s,x=x.h;if(x>1||a>1||c>1)x/=360,a/=100,c/=100;var D={},i=["r","g","b"],e;if(a){c<0.5?e=c*(1+a):e=c+a-c*a;for(var a=2*c-e,g=0;g<3;g++)c=x+1/3*-(g-1),c<0&&c++,c>1&&c--,c*6<1?D[i[g]]=a+(e-a)*6*c:c*2<1?D[i[g]]=e:c*3<2?D[i[g]]=a+(e-a)*(2/3-c)*6:D[i[g]]=a}else D={r:c,g:c,b:c};D.r*=255;D.g*=255;D.b*=255;D.hex="#"+(16777216|
D.b|D.g<<8|D.r<<16).toString(16).slice(1);f.is(d,"finite")&&(D.opacity=d);D.toString=mb;return D};f.rgb2hsb=function(a,c,d){if(c==null&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a)d=a.b,c=a.g,a=a.r;if(c==null&&f.is(a,"string"))d=f.getRGB(a),a=d.r,c=d.g,d=d.b;if(a>1||c>1||d>1)a/=255,c/=255,d/=255;var F=C(a,c,d),D=B(a,c,d),i;if(D==F)return{h:0,s:0,b:F,toString:Ja};D=F-D;a==F?i=(c-d)/D:c==F?i=2+(d-a)/D:i=4+(a-c)/D;i/=6;i<0&&i++;i>1&&i--;return{h:i,s:D/F,b:F,toString:Ja}};f.rgb2hsl=function(a,c,d){if(c==
null&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a)d=a.b,c=a.g,a=a.r;if(c==null&&f.is(a,"string"))d=f.getRGB(a),a=d.r,c=d.g,d=d.b;if(a>1||c>1||d>1)a/=255,c/=255,d/=255;var F=C(a,c,d),D=B(a,c,d),i,e=(F+D)/2;if(D==F)a={h:0,s:0,l:e};else{var g=F-D;a==F?i=(c-d)/g:c==F?i=2+(d-a)/g:i=4+(a-c)/g;i/=6;i<0&&i++;i>1&&i--;a={h:i,s:e<0.5?g/(F+D):g/(2-F-D),l:e}}a.toString=lb;return a};f._path2string=function(){return this.join(",").replace(hb,"$1")};f.getRGB=u(function(a){if(!a||(a=k(a)).indexOf("-")+1)return{r:-1,
g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(gb[c](a.toLowerCase().substring(0,2))||a.charAt()=="#")&&(a=na(a));var N,d,F,D,i;if(a=a.match(eb)){a[2]&&(F=aa(a[2].substring(5),16),d=aa(a[2].substring(3,5),16),N=aa(a[2].substring(1,3),16));a[3]&&(F=aa((i=a[3].charAt(3))+i,16),d=aa((i=a[3].charAt(2))+i,16),N=aa((i=a[3].charAt(1))+i,16));a[4]&&(i=a[4].split(xa),N=E(i[0]),i[0].slice(-1)=="%"&&(N*=2.55),d=E(i[1]),i[1].slice(-1)=="%"&&(d*=2.55),F=E(i[2]),i[2].slice(-1)==
"%"&&(F*=2.55),a[1].toLowerCase().slice(0,4)=="rgba"&&(D=E(i[3])),i[3]&&i[3].slice(-1)=="%"&&(D/=100));if(a[5])return i=a[5].split(xa),N=E(i[0]),i[0].slice(-1)=="%"&&(N*=2.55),d=E(i[1]),i[1].slice(-1)=="%"&&(d*=2.55),F=E(i[2]),i[2].slice(-1)=="%"&&(F*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="\u00b0")&&(N/=360),a[1].toLowerCase().slice(0,4)=="hsba"&&(D=E(i[3])),i[3]&&i[3].slice(-1)=="%"&&(D/=100),f.hsb2rgb(N,d,F,D);if(a[6])return i=a[6].split(xa),N=E(i[0]),i[0].slice(-1)=="%"&&(N*=2.55),d=E(i[1]),
i[1].slice(-1)=="%"&&(d*=2.55),F=E(i[2]),i[2].slice(-1)=="%"&&(F*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="\u00b0")&&(N/=360),a[1].toLowerCase().slice(0,4)=="hsla"&&(D=E(i[3])),i[3]&&i[3].slice(-1)=="%"&&(D/=100),f.hsl2rgb(N,d,F,D);a={r:N,g:d,b:F};a.hex="#"+(16777216|F|d<<8|N<<16).toString(16).slice(1);f.is(D,"finite")&&(a.opacity=D);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},f);f.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},c=this.hsb2rgb(a.h,
a.s,a.b);a.h+=0.075;if(a.h>1)a.h=0,a.s-=0.2,a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b});return c.hex};f.getColor.reset=function(){delete this.start};f.parsePathString=u(function(a){if(!a)return null;var c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];f.is(a,Y)&&f.is(a[0],Y)&&(d=oa(a));d[o]||k(a).replace(ib,function(a,x,i){var f=[],a=w.call(x);i.replace(jb,function(a,c){c&&f[S](+c)});a=="m"&&f[o]>2&&(d[S]([x].concat(f.splice(0,2))),a="l",x=x=="m"?"l":"L");for(;f[o]>=c[a];)if(d[S]([x].concat(f.splice(0,
c[a]))),!c[a])break});d[ea]=f._path2string;return d});f.findDotsAtSegment=function(a,c,d,F,f,i,e,g,A){var l=1-A,j=H(l,3)*a+H(l,2)*3*A*d+l*3*A*A*f+H(A,3)*e,l=H(l,3)*c+H(l,2)*3*A*F+l*3*A*A*i+H(A,3)*g,o=a+2*A*(d-a)+A*A*(f-2*d+a),h=c+2*A*(F-c)+A*A*(i-2*F+c),k=d+2*A*(f-d)+A*A*(e-2*f+d),v=F+2*A*(i-F)+A*A*(g-2*i+F),a=(1-A)*a+A*d,c=(1-A)*c+A*F,f=(1-A)*f+A*e,i=(1-A)*i+A*g,g=90-r.atan((o-k)/(h-v))*180/W;(o>k||h<v)&&(g+=180);return{x:j,y:l,m:{x:o,y:h},n:{x:k,y:v},start:{x:a,y:c},end:{x:f,y:i},alpha:g}};var qa=
u(function(a){if(!a)return{x:0,y:0,width:0,height:0};for(var a=pa(a),c=0,d=0,f=[],D=[],i,e=0,g=a[o];e<g;e++)i=a[e],i[0]=="M"?(c=i[1],d=i[2],f[S](c),D[S](d)):(c=nb(c,d,i[1],i[2],i[3],i[4],i[5],i[6]),f=f.concat(c.min.x,c.max.x),D=D.concat(c.min.y,c.max.y),c=i[5],d=i[6]);a=B[z](0,f);i=B[z](0,D);return{x:a,y:i,width:C[z](0,f)-a,height:C[z](0,D)-i}}),oa=function(a){var c=[];if(!f.is(a,Y)||!f.is(a&&a[0],Y))a=f.parsePathString(a);for(var d=0,F=a[o];d<F;d++){c[d]=[];for(var D=0,i=a[d][o];D<i;D++)c[d][D]=
a[d][D]}c[ea]=f._path2string;return c},ya=u(function(a){if(!f.is(a,Y)||!f.is(a&&a[0],Y))a=f.parsePathString(a);var c=[],d=0,F=0,D=0,i=0,e=0;a[0][0]=="M"&&(d=a[0][1],F=a[0][2],D=d,i=F,e++,c[S](["M",d,F]));for(var g=a[o];e<g;e++){var A=c[e]=[],l=a[e];if(l[0]!=w.call(l[0]))switch(A[0]=w.call(l[0]),A[0]){case "a":A[1]=l[1];A[2]=l[2];A[3]=l[3];A[4]=l[4];A[5]=l[5];A[6]=+(l[6]-d).toFixed(3);A[7]=+(l[7]-F).toFixed(3);break;case "v":A[1]=+(l[1]-F).toFixed(3);break;case "m":D=l[1],i=l[2];default:for(var j=
1,h=l[o];j<h;j++)A[j]=+(l[j]-(j%2?d:F)).toFixed(3)}else{c[e]=[];l[0]=="m"&&(D=l[1]+d,i=l[2]+F);A=0;for(j=l[o];A<j;A++)c[e][A]=l[A]}l=c[e][o];switch(c[e][0]){case "z":d=D;F=i;break;case "h":d+=+c[e][l-1];break;case "v":F+=+c[e][l-1];break;default:d+=+c[e][l-2],F+=+c[e][l-1]}}c[ea]=f._path2string;return c},0,oa),ia=u(function(a){if(!f.is(a,Y)||!f.is(a&&a[0],Y))a=f.parsePathString(a);var c=[],d=0,F=0,D=0,i=0,e=0;a[0][0]=="M"&&(d=+a[0][1],F=+a[0][2],D=d,i=F,e++,c[0]=["M",d,F]);for(var g=a[o];e<g;e++){var j=
c[e]=[],l=a[e];if(l[0]!=fa.call(l[0]))switch(j[0]=fa.call(l[0]),j[0]){case "A":j[1]=l[1];j[2]=l[2];j[3]=l[3];j[4]=l[4];j[5]=l[5];j[6]=+(l[6]+d);j[7]=+(l[7]+F);break;case "V":j[1]=+l[1]+F;break;case "H":j[1]=+l[1]+d;break;case "M":D=+l[1]+d,i=+l[2]+F;default:for(var h=1,k=l[o];h<k;h++)j[h]=+l[h]+(h%2?d:F)}else{h=0;for(k=l[o];h<k;h++)c[e][h]=l[h]}switch(j[0]){case "Z":d=D;F=i;break;case "H":d=j[1];break;case "V":F=j[1];break;case "M":D=c[e][c[e][o]-2],i=c[e][c[e][o]-1];default:d=c[e][c[e][o]-2],F=c[e][c[e][o]-
1]}}c[ea]=f._path2string;return c},null,oa),Ka=function(a,c,d,f,e,i){var g=1/3,j=2/3;return[g*a+j*d,g*c+j*f,g*e+j*d,g*i+j*f,e,i]},La=function(a,c,d,f,e,i,g,j,h,l){var k=W*120/180,w=W/180*(+e||0),m=[],n,q=u(function(a,c,x){var d=a*r.cos(x)-c*r.sin(x),a=a*r.sin(x)+c*r.cos(x);return{x:d,y:a}});if(l)C=l[0],n=l[1],i=l[2],p=l[3];else{n=q(a,c,-w);a=n.x;c=n.y;n=q(j,h,-w);j=n.x;h=n.y;r.cos(W/180*e);r.sin(W/180*e);n=(a-j)/2;C=(c-h)/2;p=n*n/(d*d)+C*C/(f*f);p>1&&(p=r.sqrt(p),d*=p,f*=p);var p=d*d,B=f*f,p=(i==
g?-1:1)*r.sqrt(U((p*B-p*C*C-B*n*n)/(p*C*C+B*n*n))),i=p*d*C/f+(a+j)/2,p=p*-f*n/d+(c+h)/2,C=r.asin(((c-p)/f).toFixed(9));n=r.asin(((h-p)/f).toFixed(9));C=a<i?W-C:C;n=j<i?W-n:n;C<0&&(C=W*2+C);n<0&&(n=W*2+n);g&&C>n&&(C-=W*2);!g&&n>C&&(n-=W*2)}if(U(n-C)>k){var m=n,B=j,s=h;n=C+k*(g&&n>C?1:-1);j=i+d*r.cos(n);h=p+f*r.sin(n);m=La(j,h,d,f,e,0,g,B,s,[n,m,i,p])}i=n-C;e=r.cos(C);k=r.sin(C);g=r.cos(n);n=r.sin(n);i=r.tan(i/4);d=4/3*d*i;i*=4/3*f;f=[a,c];a=[a+d*k,c-i*e];c=[j+d*n,h-i*g];j=[j,h];a[0]=2*f[0]-a[0];a[1]=
2*f[1]-a[1];if(l)return[a,c,j].concat(m);m=[a,c,j].concat(m)[v]().split(",");l=[];j=0;for(h=m[o];j<h;j++)l[j]=j%2?q(m[j-1],m[j],w).y:q(m[j],m[j+1],w).x;return l},ra=function(a,c,d,f,e,i,g,j,h){var l=1-h;return{x:H(l,3)*a+H(l,2)*3*h*d+l*3*h*h*e+H(h,3)*g,y:H(l,3)*c+H(l,2)*3*h*f+l*3*h*h*i+H(h,3)*j}},nb=u(function(a,c,d,f,e,i,g,j){var h=e-2*d+a-(g-2*e+d),l=2*(d-a)-2*(e-d),o=a-d,k=(-l+r.sqrt(l*l-4*h*o))/2/h,h=(-l-r.sqrt(l*l-4*h*o))/2/h,v=[c,j],w=[a,g];U(k)>"1e12"&&(k=0.5);U(h)>"1e12"&&(h=0.5);k>0&&k<1&&
(k=ra(a,c,d,f,e,i,g,j,k),w[S](k.x),v[S](k.y));h>0&&h<1&&(k=ra(a,c,d,f,e,i,g,j,h),w[S](k.x),v[S](k.y));h=i-2*f+c-(j-2*i+f);l=2*(f-c)-2*(i-f);o=c-f;k=(-l+r.sqrt(l*l-4*h*o))/2/h;h=(-l-r.sqrt(l*l-4*h*o))/2/h;U(k)>"1e12"&&(k=0.5);U(h)>"1e12"&&(h=0.5);k>0&&k<1&&(k=ra(a,c,d,f,e,i,g,j,k),w[S](k.x),v[S](k.y));h>0&&h<1&&(k=ra(a,c,d,f,e,i,g,j,h),w[S](k.x),v[S](k.y));return{min:{x:B[z](0,w),y:B[z](0,v)},max:{x:C[z](0,w),y:C[z](0,v)}}}),pa=u(function(a,c){var d=ia(a),f=c&&ia(c),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,
qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=function(a,c){var x,d;if(!a)return["C",c.x,c.y,c.x,c.y,c.x,c.y];!(a[0]in{T:1,Q:1})&&(c.qx=c.qy=null);switch(a[0]){case "M":c.X=a[1];c.Y=a[2];break;case "A":a=["C"].concat(La[z](0,[c.x,c.y].concat(a.slice(1))));break;case "S":x=c.x+(c.x-(c.bx||c.x));d=c.y+(c.y-(c.by||c.y));a=["C",x,d].concat(a.slice(1));break;case "T":c.qx=c.x+(c.x-(c.qx||c.x));c.qy=c.y+(c.y-(c.qy||c.y));a=["C"].concat(Ka(c.x,c.y,c.qx,c.qy,a[1],a[2]));break;case "Q":c.qx=a[1];
c.qy=a[2];a=["C"].concat(Ka(c.x,c.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat([c.x,c.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"].concat([c.x,c.y,a[1],c.y,a[1],c.y]);break;case "V":a=["C"].concat([c.x,c.y,c.x,a[1],c.x,a[1]]);break;case "Z":a=["C"].concat([c.x,c.y,c.X,c.Y,c.X,c.Y])}return a},j=function(a,c){if(a[c][o]>7){a[c].shift();for(var x=a[c];x[o];)a.splice(c++,0,["C"].concat(x.splice(0,6)));a.splice(c,1);k=C(d[o],f&&f[o]||0)}},h=function(a,c,x,N,i){if(a&&c&&a[i][0]=="M"&&c[i][0]!=
"M")c.splice(i,0,["M",N.x,N.y]),x.bx=0,x.by=0,x.x=a[i][1],x.y=a[i][2],k=C(d[o],f&&f[o]||0)},l=0,k=C(d[o],f&&f[o]||0);for(;l<k;l++){d[l]=g(d[l],e);j(d,l);f&&(f[l]=g(f[l],i));f&&j(f,l);h(d,f,e,i,l);h(f,d,i,e,l);var v=d[l],w=f&&f[l],n=v[o],m=f&&w[o];e.x=v[n-2];e.y=v[n-1];e.bx=E(v[n-4])||e.x;e.by=E(v[n-3])||e.y;i.bx=f&&(E(w[m-4])||i.x);i.by=f&&(E(w[m-3])||i.y);i.x=f&&w[m-2];i.y=f&&w[m-1]}return f?[d,f]:d},null,oa),Ma=u(function(a){for(var c=[],d=0,e=a[o];d<e;d++){var g={},i=a[d].match(/^([^:]*):?([\d\.]*)/);
g.color=f.getRGB(i[1]);if(g.color.error)return null;g.color=g.color.hex;i[2]&&(g.offset=i[2]+"%");c[S](g)}d=1;for(e=c[o]-1;d<e;d++)if(!c[d].offset){a=E(c[d-1].offset||0);i=0;for(g=d+1;g<e;g++)if(c[g].offset){i=c[g].offset;break}i||(i=100,g=e);i=E(i);for(i=(i-a)/(g-d+1);d<g;d++)a+=i,c[d].offset=a+"%"}return c}),Na=function(a,c,e,g){if(f.is(a,"string")||f.is(a,"object")){if(a=f.is(a,"string")?d.getElementById(a):a,a.tagName)return c==null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||
a.offsetHeight}:{container:a,width:c,height:e}}else return{container:1,x:a,y:c,width:e,height:g}},za=function(a,d){var f=this,e;for(e in d)if(d[c](e)&&!(e in a))switch(typeof d[e]){case "function":(function(c){a[e]=a===f?c:function(){return c[z](f,arguments)}})(d[e]);break;case "object":a[e]=a[e]||{};za.call(this,a[e],d[e]);break;default:a[e]=d[e]}},ha=function(a,c){a==c.top&&(c.top=a.prev);a==c.bottom&&(c.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)},Oa=function(a,c){if(c.top!==
a)ha(a,c),a.next=null,a.prev=c.top,c.top.next=a,c.top=a},Pa=function(a,c){if(c.bottom!==a)ha(a,c),a.next=c.bottom,a.prev=null,c.bottom.prev=a,c.bottom=a},Qa=function(a,c,d){ha(a,d);c==d.top&&(d.top=a);c.next&&(c.next.prev=a);a.next=c.next;a.prev=c;c.next=a},Ra=function(a,c,d){ha(a,d);c==d.bottom&&(d.bottom=a);c.prev&&(c.prev.next=a);a.prev=c.prev;c.prev=a;a.next=c},Sa=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}};f.pathToRelative=
ya;if(f.svg){G.svgns="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";var J=function(a){return+a+(~~a===a)*0.5},I=function(a,f){if(f)for(var e in f)f[c](e)&&a.setAttribute(e,k(f[e]));else return a=d.createElementNS(G.svgns,a),a.style.webkitTapHighlightColor="rgba(0,0,0,0)",a};f[ea]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var Ta=function(a,c){var d=I("path");c.canvas&&c.canvas.appendChild(d);d=new R(d,c);d.type="path";ga(d,{fill:"none",
stroke:"#000",path:a});return d},ja=function(a,c,f){var e="linear",g=0.5,i=0.5,j=a.style,c=k(c).replace(Ia,function(a,c,d){e="radial";c&&d&&(g=E(c),i=E(d),a=(i>0.5)*2-1,H(g-0.5,2)+H(i-0.5,2)>0.25&&(i=r.sqrt(0.25-H(g-0.5,2))*a+0.5)&&i!=0.5&&(i=i.toFixed(5)-1.0E-5*a));return""}),c=c.split(/\s*\-\s*/);if(e=="linear"){var h=c.shift(),h=-E(h);if(isNaN(h))return null;var h=[0,0,r.cos(h*W/180),r.sin(h*W/180)],v=1/(C(U(h[2]),U(h[3]))||1);h[2]*=v;h[3]*=v;h[2]<0&&(h[0]=-h[2],h[2]=0);h[3]<0&&(h[1]=-h[3],h[3]=
0)}c=Ma(c);if(!c)return null;v=a.getAttribute("fill");(v=v.match(/^url\(#(.*)\)$/))&&f.defs.removeChild(d.getElementById(v[1]));v=I(e+"Gradient");v.id=s();I(v,e=="radial"?{fx:g,fy:i}:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]});f.defs.appendChild(v);f=0;for(h=c[o];f<h;f++){var l=I("stop");I(l,{offset:c[f].offset?c[f].offset:f?"100%":"0%","stop-color":c[f].color||"#fff"});v.appendChild(l)}I(a,{fill:"url(#"+v.id+")",opacity:1,"fill-opacity":1});j.fill="";j.opacity=1;return j.fillOpacity=1},Aa=function(a){var c=
a.getBBox();I(a.pattern,{patternTransform:f.format("translate({0},{1})",c.x,c.y)})},ga=function(a,N){var e={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},g=a.node,h=a.attrs,i=a.rotate(),j=function(a,c){if(c=e[w.call(c)]){for(var d=a.attrs["stroke-width"]||"1",x={round:d,square:d,butt:0}[a.attrs["stroke-linecap"]||N["stroke-linecap"]]||0,i=[],f=c[o];f--;)i[f]=c[f]*d+(f%2?1:-1)*x;I(g,{"stroke-dasharray":i[v](",")})}};
N[c]("rotation")&&(i=N.rotation);var m=k(i).split(n);m.length-1?(m[1]=+m[1],m[2]=+m[2]):m=null;E(i)&&a.rotate(0,!0);for(var A in N)if(N[c](A)&&ma[c](A)){var l=N[A];h[A]=l;switch(A){case "blur":a.blur(l);break;case "rotation":a.rotate(l,!0);break;case "href":case "title":case "target":var r=g.parentNode;if(w.call(r.tagName)!="a"){var p=I("a");r.insertBefore(p,g);p.appendChild(g);r=p}A=="target"&&l=="blank"?r.setAttributeNS(a.paper.xlink,"show","new"):r.setAttributeNS(a.paper.xlink,A,l);break;case "cursor":g.style.cursor=
l;break;case "clip-rect":r=k(l).split(n);if(r[o]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var q=I("clipPath"),p=I("rect");q.id=s();I(p,{x:r[0],y:r[1],width:r[2],height:r[3]});q.appendChild(p);a.paper.defs.appendChild(q);I(g,{"clip-path":"url(#"+q.id+")"});a.clip=p}l||((l=d.getElementById(g.getAttribute("clip-path").replace(/(^url\(#|\)$)/g,"")))&&l.parentNode.removeChild(l),I(g,{"clip-path":""}),delete a.clip);break;case "path":a.type=="path"&&I(g,{d:l?h.path=ia(l):
"M0,0"});break;case "width":if(g.setAttribute(A,l),h.fx)A="x",l=h.x;else break;case "x":h.fx&&(l=-h.x-(h.width||0));case "rx":if(A=="rx"&&a.type=="rect")break;case "cx":m&&(A=="x"||A=="cx")&&(m[1]+=l-h[A]);g.setAttribute(A,l);a.pattern&&Aa(a);break;case "height":if(g.setAttribute(A,l),h.fy)A="y",l=h.y;else break;case "y":h.fy&&(l=-h.y-(h.height||0));case "ry":if(A=="ry"&&a.type=="rect")break;case "cy":m&&(A=="y"||A=="cy")&&(m[2]+=l-h[A]);g.setAttribute(A,l);a.pattern&&Aa(a);break;case "r":a.type==
"rect"?I(g,{rx:l,ry:l}):g.setAttribute(A,l);break;case "src":a.type=="image"&&g.setAttributeNS(a.paper.xlink,"href",l);break;case "stroke-width":g.style.strokeWidth=l;g.setAttribute(A,l);h["stroke-dasharray"]&&j(a,h["stroke-dasharray"]);break;case "stroke-dasharray":j(a,l);break;case "translation":l=k(l).split(n);l[0]=+l[0]||0;l[1]=+l[1]||0;m&&(m[1]+=l[0],m[2]+=l[1]);sa.call(a,l[0],l[1]);break;case "scale":l=k(l).split(n);a.scale(+l[0]||1,+l[1]||+l[0]||1,isNaN(E(l[2]))?null:+l[2],isNaN(E(l[3]))?null:
+l[3]);break;case "fill":if(r=k(l).match(Ha)){var q=I("pattern"),C=I("image");q.id=s();I(q,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});I(C,{x:0,y:0});C.setAttributeNS(a.paper.xlink,"href",r[1]);q.appendChild(C);l=d.createElement("img");l.style.cssText="position:absolute;left:-9999em;top-9999em";l.onload=function(){I(q,{width:this.offsetWidth,height:this.offsetHeight});I(C,{width:this.offsetWidth,height:this.offsetHeight});d.body.removeChild(this);a.paper.safari()};d.body.appendChild(l);
l.src=r[1];a.paper.defs.appendChild(q);g.style.fill="url(#"+q.id+")";I(g,{fill:"url(#"+q.id+")"});a.pattern=q;a.pattern&&Aa(a);break}r=f.getRGB(l);if(r.error)if(({circle:1,ellipse:1}[c](a.type)||k(l).charAt()!="r")&&ja(g,l,a.paper)){h.gradient=l;h.fill="none";break}else delete N.gradient,delete h.gradient,!f.is(h.opacity,"undefined")&&f.is(N.opacity,"undefined")&&I(g,{opacity:h.opacity}),!f.is(h["fill-opacity"],"undefined")&&f.is(N["fill-opacity"],"undefined")&&I(g,{"fill-opacity":h["fill-opacity"]});
r[c]("opacity")&&I(g,{"fill-opacity":r.opacity>1?r.opacity/100:r.opacity});case "stroke":r=f.getRGB(l);g.setAttribute(A,r.hex);A=="stroke"&&r[c]("opacity")&&I(g,{"stroke-opacity":r.opacity>1?r.opacity/100:r.opacity});break;case "gradient":(({circle:1,ellipse:1})[c](a.type)||k(l).charAt()!="r")&&ja(g,l,a.paper);break;case "opacity":h.gradient&&!h[c]("stroke-opacity")&&I(g,{"stroke-opacity":l>1?l/100:l});case "fill-opacity":if(h.gradient){if(r=d.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,
"")))r=r.getElementsByTagName("stop"),r[r[o]-1].setAttribute("stop-opacity",l);break}default:A=="font-size"&&(l=aa(l,10)+"px"),r=A.replace(/(\-.)/g,function(a){return fa.call(a.substring(1))}),g.style[r]=l,g.setAttribute(A,l)}}ob(a,N);m?a.rotate(m.join(M)):E(i)&&a.rotate(i,!0)},ob=function(a,e){if(!(a.type!="text"||!e[c]("text")&&!e[c]("font")&&!e[c]("font-size")&&!e[c]("x")&&!e[c]("y"))){var g=a.attrs,h=a.node,j=h.firstChild?aa(d.defaultView.getComputedStyle(h.firstChild,"").getPropertyValue("font-size"),
10):10;if(e[c]("text")){for(g.text=e.text;h.firstChild;)h.removeChild(h.firstChild);for(var i=k(e.text).split("\n"),v=0,w=i[o];v<w;v++)if(i[v]){var m=I("tspan");v&&I(m,{dy:j*1.2,x:g.x});m.appendChild(d.createTextNode(i[v]));h.appendChild(m)}}else{i=h.getElementsByTagName("tspan");v=0;for(w=i[o];v<w;v++)v&&I(i[v],{dy:j*1.2,x:g.x})}I(h,{y:g.y});j=a.getBBox();(j=g.y-(j.y+j.height/2))&&f.is(j,"finite")&&I(h,{y:g.y+j})}},R=function(a,c){this[0]=a;this.id=f._oid++;this.node=a;a.raphael=this;this.paper=
c;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=c.top)&&(c.top.next=this);c.top=this;this.next=null},O=R[m];R[m].rotate=function(a,c,d){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][v](M);return this._.rt.deg}var e=this.getBBox(),a=k(a).split(n);a[o]-1&&(c=E(a[1]),d=E(a[2]));a=E(a[0]);c!=null&&c!==!1?this._.rt.deg=a:this._.rt.deg+=a;d==null&&(c=null);
this._.rt.cx=c;this._.rt.cy=d;c=c==null?e.x+e.width/2:c;d=d==null?e.y+e.height/2:d;this._.rt.deg?(this.transformations[0]=f.format("rotate({0} {1} {2})",this._.rt.deg,c,d),this.clip&&I(this.clip,{transform:f.format("rotate({0} {1} {2})",-this._.rt.deg,c,d)})):(this.transformations[0]="",this.clip&&I(this.clip,{transform:""}));I(this.node,{transform:this.transformations[v](M)});return this};R[m].hide=function(){!this.removed&&(this.node.style.display="none");return this};R[m].show=function(){!this.removed&&
(this.node.style.display="");return this};R[m].remove=function(){if(!this.removed){ha(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=!0}};R[m].getBBox=function(){if(this.removed)return this;if(this.type=="path")return qa(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=!0}var c={};try{c=this.node.getBBox()}catch(d){}finally{c=c||{}}if(this.type=="text")for(var c={x:c.x,y:Infinity,width:0,height:0},f=0,e=this.node.getNumberOfChars();f<
e;f++){var i=this.node.getExtentOfChar(f);i.y<c.y&&(c.y=i.y);i.y+i.height-c.y>c.height&&(c.height=i.y+i.height-c.y);i.x+i.width-c.x>c.width&&(c.width=i.x+i.width-c.x)}a&&this.hide();return c};R[m].attr=function(a,d){if(this.removed)return this;if(a==null){var e={},g;for(g in this.attrs)this.attrs[c](g)&&(e[g]=this.attrs[g]);this._.rt.deg&&(e.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(e.scale=this.scale());e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient;return e}if(d==
null&&f.is(a,"string")){if(a=="translation")return sa.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(d==null&&f.is(a,Y)){g={};for(var e=0,h=a.length;e<h;e++)g[a[e]]=this.attr(a[e]);return g}d!=null?(e={},e[a]=d):a!=null&&f.is(a,"object")&&(e=a);for(h in this.paper.customAttributes)if(this.paper.customAttributes[c](h)&&e[c](h)&&f.is(this.paper.customAttributes[h],
"function")){g=this.paper.customAttributes[h].apply(this,[].concat(e[h]));this.attrs[h]=e[h];for(var i in g)g[c](i)&&(e[i]=g[i])}ga(this,e);return this};R[m].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&Oa(this,a);return this};R[m].toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Pa(this,this.paper));return this};
R[m].insertAfter=function(a){if(this.removed)return this;var c=a.node||a[a.length-1].node;c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node);Qa(this,a,this.paper);return this};R[m].insertBefore=function(a){if(this.removed)return this;var c=a.node||a[0].node;c.parentNode.insertBefore(this.node,c);Ra(this,a,this.paper);return this};R[m].blur=function(a){if(+a!==0){var c=I("filter"),d=I("feGaussianBlur");this.attrs.blur=a;c.id=s();I(d,{stdDeviation:+a||
1.5});c.appendChild(d);this.paper.defs.appendChild(c);this._blur=c;I(this.node,{filter:"url(#"+c.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};var Ua=function(a,c,d,f){var e=I("circle");a.canvas&&a.canvas.appendChild(e);a=new R(e,a);a.attrs={cx:c,cy:d,r:f,fill:"none",stroke:"#000"};a.type="circle";I(e,a.attrs);return a},Va=function(a,c,d,f,e,i){var g=I("rect");a.canvas&&a.canvas.appendChild(g);
a=new R(g,a);a.attrs={x:c,y:d,width:f,height:e,r:i||0,rx:i||0,ry:i||0,fill:"none",stroke:"#000"};a.type="rect";I(g,a.attrs);return a},Wa=function(a,c,d,f,e){var i=I("ellipse");a.canvas&&a.canvas.appendChild(i);a=new R(i,a);a.attrs={cx:c,cy:d,rx:f,ry:e,fill:"none",stroke:"#000"};a.type="ellipse";I(i,a.attrs);return a},Xa=function(a,c,d,f,e,i){var g=I("image");I(g,{x:d,y:f,width:e,height:i,preserveAspectRatio:"none"});g.setAttributeNS(a.xlink,"href",c);a.canvas&&a.canvas.appendChild(g);a=new R(g,a);
a.attrs={x:d,y:f,width:e,height:i,src:c};a.type="image";return a},Ya=function(a,c,d,f){var e=I("text");I(e,{x:c,y:d,"text-anchor":"middle"});a.canvas&&a.canvas.appendChild(e);a=new R(e,a);a.attrs={x:c,y:d,"text-anchor":"middle",text:f,font:ma.font,stroke:"none",fill:"#000"};a.type="text";ga(a,a.attrs);return a},Za=function(a,c){this.width=a||this.width;this.height=c||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},va=function(){var a=
Na[z](0,arguments),c=a&&a.container,e=a.x,h=a.y,j=a.width,a=a.height;if(!c)throw Error("SVG container not found.");var i=I("svg"),e=e||0,h=h||0,j=j||512,a=a||342;I(i,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:j,height:a});c==1?(i.style.cssText="position:absolute;left:"+e+"px;top:"+h+"px",d.body.appendChild(i)):c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i);c=new g;c.width=j;c.height=a;c.canvas=i;za.call(c,c,f.fn);c.clear();return c};G.clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);
this.bottom=this.top=null;(this.desc=I("desc")).appendChild(d.createTextNode("Created with Rapha\u00ebl"));a.appendChild(this.desc);a.appendChild(this.defs=I("defs"))};G.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=Sa(a)}}if(f.vml){var $a={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},pb=/([clmz]),?([^clmz]*)/gi,qb=/ progid:\S+Blur\([^\)]+\)/g,rb=/-?[^,\s-]+/g,ka=1E3+M+1E3,la={path:1,rect:1},sb=function(a){var c=/[ahqstv]/ig,
d=ia;k(a).match(c)&&(d=pa);c=/[clmz]/g;if(d==ia&&!k(a).match(c))return a=k(a).replace(pb,function(a,c,d){var f=[],i=w.call(c)=="m",x=$a[c];d.replace(rb,function(a){i&&f[o]==2&&(x+=f+$a[c=="m"?"l":"L"],f=[]);f[S](J(a*10))});return x+f});for(var c=d(a),f,a=[],e=0,i=c[o];e<i;e++){d=c[e];f=w.call(c[e][0]);f=="z"&&(f="x");for(var g=1,h=d[o];g<h;g++)f+=J(d[g]*10)+(g!=h-1?",":"");a[S](f)}return a[v](M)};f[ea]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};Ta=function(a,c){var d=X("group");d.style.cssText="position:absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px";d.coordsize=c.coordsize;d.coordorigin=c.coordorigin;var f=X("shape"),e=f.style;e.width=c.width+"px";e.height=c.height+"px";f.coordsize=ka;f.coordorigin=c.coordorigin;d.appendChild(f);f=new R(f,d,c);e={fill:"none",stroke:"#000"};a&&(e.path=a);f.type="path";f.path=[];f.Path="";ga(f,e);c.canvas.appendChild(d);return f};ga=function(a,e){a.attrs=a.attrs||{};var g=a.node,
h=a.attrs,j=g.style,i;i=(e.x!=h.x||e.y!=h.y||e.width!=h.width||e.height!=h.height||e.r!=h.r)&&a.type=="rect";for(var v in e)e[c](v)&&(h[v]=e[v]);if(i)h.path=ab(h.x,h.y,h.width,h.height,h.r),a.X=h.x,a.Y=h.y,a.W=h.width,a.H=h.height;e.href&&(g.href=e.href);e.title&&(g.title=e.title);e.target&&(g.target=e.target);e.cursor&&(j.cursor=e.cursor);"blur"in e&&a.blur(e.blur);if(e.path&&a.type=="path"||i)g.path=sb(h.path);e.rotation!=null&&a.rotate(e.rotation,!0);e.translation&&(i=k(e.translation).split(n),
sa.call(a,i[0],i[1]),a._.rt.cx!=null&&(a._.rt.cx+=+i[0],a._.rt.cy+=+i[1],a.setBox(a.attrs,i[0],i[1])));e.scale&&(i=k(e.scale).split(n),a.scale(+i[0]||1,+i[1]||+i[0]||1,+i[2]||null,+i[3]||null));if("clip-rect"in e){i=k(e["clip-rect"]).split(n);if(i[o]==4){i[2]=+i[2]+ +i[0];i[3]=+i[3]+ +i[1];v=g.clipRect||d.createElement("div");var w=v.style,m=g.parentNode;w.clip=f.format("rect({1}px {2}px {3}px {0}px)",i);if(!g.clipRect)w.position="absolute",w.top=0,w.left=0,w.width=a.paper.width+"px",w.height=a.paper.height+
"px",m.parentNode.insertBefore(v,m),v.appendChild(m),g.clipRect=v}e["clip-rect"]||g.clipRect&&(g.clipRect.style.clip="")}a.type=="image"&&e.src&&(g.src=e.src);if(a.type=="image"&&e.opacity)g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e.opacity*100+")",j.filter=(g.filterMatrix||"")+(g.filterOpacity||"");e.font&&(j.font=e.font);e["font-family"]&&(j.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"');e["font-size"]&&(j.fontSize=e["font-size"]);e["font-weight"]&&
(j.fontWeight=e["font-weight"]);e["font-style"]&&(j.fontStyle=e["font-style"]);if(e.opacity!=null||e["stroke-width"]!=null||e.fill!=null||e.stroke!=null||e["stroke-width"]!=null||e["stroke-opacity"]!=null||e["fill-opacity"]!=null||e["stroke-dasharray"]!=null||e["stroke-miterlimit"]!=null||e["stroke-linejoin"]!=null||e["stroke-linecap"]!=null){g=a.shape||g;i=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];v=!1;!i&&(v=i=X("fill"));if("fill-opacity"in e||"opacity"in e)j=((+h["fill-opacity"]+
1||2)-1)*((+h.opacity+1||2)-1)*((+f.getRGB(e.fill).o+1||2)-1),j=B(C(j,0),1),i.opacity=j;e.fill&&(i.on=!0);if(i.on==null||e.fill=="none")i.on=!1;if(i.on&&e.fill)if(j=e.fill.match(Ha))i.src=j[1],i.type="tile";else if(i.color=f.getRGB(e.fill).hex,i.src="",i.type="solid",f.getRGB(e.fill).error&&(a.type in{circle:1,ellipse:1}||k(e.fill).charAt()!="r")&&ja(a,e.fill))h.fill="none",h.gradient=e.fill;v&&g.appendChild(i);i=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];v=!1;!i&&(v=i=
X("stroke"));if(e.stroke&&e.stroke!="none"||e["stroke-width"]||e["stroke-opacity"]!=null||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])i.on=!0;(e.stroke=="none"||i.on==null||e.stroke==0||e["stroke-width"]==0)&&(i.on=!1);j=f.getRGB(e.stroke);i.on&&e.stroke&&(i.color=j.hex);j=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+j.o+1||2)-1);w=(E(e["stroke-width"])||1)*0.75;j=B(C(j,0),1);e["stroke-width"]==null&&(w=h["stroke-width"]);e["stroke-width"]&&
(i.weight=w);w&&w<1&&(j*=w)&&(i.weight=1);i.opacity=j;e["stroke-linejoin"]&&(i.joinstyle=e["stroke-linejoin"]||"miter");i.miterlimit=e["stroke-miterlimit"]||8;e["stroke-linecap"]&&(i.endcap=e["stroke-linecap"]=="butt"?"flat":e["stroke-linecap"]=="square"?"square":"round");if(e["stroke-dasharray"])j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},i.dashstyle=j[c](e["stroke-dasharray"])?
j[e["stroke-dasharray"]]:"";v&&g.appendChild(i)}if(a.type=="text")switch(j=a.paper.span.style,h.font&&(j.font=h.font),h["font-family"]&&(j.fontFamily=h["font-family"]),h["font-size"]&&(j.fontSize=h["font-size"]),h["font-weight"]&&(j.fontWeight=h["font-weight"]),h["font-style"]&&(j.fontStyle=h["font-style"]),a.node.string&&(a.paper.span.innerHTML=k(a.node.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),a.W=h.w=a.paper.span.offsetWidth,a.H=h.h=a.paper.span.offsetHeight,a.X=
h.x,a.Y=h.y+J(a.H/2),h["text-anchor"]){case "start":a.node.style["v-text-align"]="left";a.bbx=J(a.W/2);break;case "end":a.node.style["v-text-align"]="right";a.bbx=-J(a.W/2);break;default:a.node.style["v-text-align"]="center"}};ja=function(a,c){a.attrs=a.attrs||{};var d,e="linear",f=".5 .5";a.attrs.gradient=c;c=k(c).replace(Ia,function(a,c,d){e="radial";c&&d&&(c=E(c),d=E(d),H(c-0.5,2)+H(d-0.5,2)>0.25&&(d=r.sqrt(0.25-H(c-0.5,2))*((d>0.5)*2-1)+0.5),f=c+M+d);return""});c=c.split(/\s*\-\s*/);if(e=="linear"){var i=
c.shift(),i=-E(i);if(isNaN(i))return null}var g=Ma(c);if(!g)return null;a=a.shape||a.node;d=a.getElementsByTagName("fill")[0]||X("fill");!d.parentNode&&a.appendChild(d);if(g[o]){d.on=!0;d.method="none";d.color=g[0].color;d.color2=g[g[o]-1].color;for(var h=[],j=0,l=g[o];j<l;j++)g[j].offset&&h[S](g[j].offset+M+g[j].color);d.colors&&(d.colors.value=h[o]?h[v]():"0% "+d.color);e=="radial"?(d.type="gradientradial",d.focus="100%",d.focussize=f,d.focusposition=f):(d.type="gradient",d.angle=(270-i)%360)}return 1};
R=function(a,c,d){this[0]=a;this.id=f._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=c;this.paper=d;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null};O=R[m];O.rotate=function(a,c,d){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][v](M);return this._.rt.deg}a=k(a).split(n);a[o]-1&&(c=E(a[1]),d=E(a[2]));a=E(a[0]);c!=null?this._.rt.deg=a:
this._.rt.deg+=a;d==null&&(c=null);this._.rt.cx=c;this._.rt.cy=d;this.setBox(this.attrs,c,d);this.Group.style.rotation=this._.rt.deg;return this};O.setBox=function(a,d,e){if(this.removed)return this;var f=this.Group.style,g=this.shape&&this.shape.style||this.node.style,a=a||{},i;for(i in a)a[c](i)&&(this.attrs[i]=a[i]);var d=d||this._.rt.cx,e=e||this._.rt.cy,h=this.attrs,j;switch(this.type){case "circle":a=h.cx-h.r;i=h.cy-h.r;j=h=h.r*2;break;case "ellipse":a=h.cx-h.rx;i=h.cy-h.ry;j=h.rx*2;h=h.ry*
2;break;case "image":a=+h.x;i=+h.y;j=h.width||0;h=h.height||0;break;case "text":this.textpath.v=["m",J(h.x),", ",J(h.y-2),"l",J(h.x)+1,", ",J(h.y-2)][v]("");a=h.x-J(this.W/2);i=h.y-this.H/2;j=this.W;h=this.H;break;case "rect":case "path":this.attrs.path?(h=qa(this.attrs.path),a=h.x,i=h.y,j=h.width,h=h.height):(i=a=0,j=this.paper.width,h=this.paper.height);break;default:i=a=0,j=this.paper.width,h=this.paper.height}var d=(d==null?a+j/2:d)-this.paper.width/2,e=(e==null?i+h/2:e)-this.paper.height/2,o;
f.left!=(o=d+"px")&&(f.left=o);f.top!=(o=e+"px")&&(f.top=o);this.X=la[c](this.type)?-d:a;this.Y=la[c](this.type)?-e:i;this.W=j;this.H=h;la[c](this.type)?(g.left!=(o=-d*10+"px")&&(g.left=o),g.top!=(o=-e*10+"px")&&(g.top=o)):this.type=="text"?(g.left!=(o=-d+"px")&&(g.left=o),g.top!=(o=-e+"px")&&(g.top=o)):(f.width!=(o=this.paper.width+"px")&&(f.width=o),f.height!=(o=this.paper.height+"px")&&(f.height=o),g.left!=(o=a-d+"px")&&(g.left=o),g.top!=(o=i-e+"px")&&(g.top=o),g.width!=(o=j+"px")&&(g.width=o),
g.height!=(o=h+"px")&&(g.height=o))};O.hide=function(){!this.removed&&(this.Group.style.display="none");return this};O.show=function(){!this.removed&&(this.Group.style.display="block");return this};O.getBBox=function(){if(this.removed)return this;if(la[c](this.type))return qa(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};O.remove=function(){if(!this.removed){ha(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=!0}};O.attr=function(a,d){if(this.removed)return this;if(a==null){var e={},g;for(g in this.attrs)this.attrs[c](g)&&(e[g]=this.attrs[g]);this._.rt.deg&&(e.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(e.scale=this.scale());e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient;return e}if(d==null&&f.is(a,"string")){if(a=="translation")return sa.call(this);if(a=="rotation")return this.rotate();
if(a=="scale")return this.scale();if(a=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(this.attrs&&d==null&&f.is(a,Y)){var h={};g=0;for(e=a[o];g<e;g++)h[a[g]]=this.attr(a[g]);return h}d!=null&&(e={},e[a]=d);d==null&&f.is(a,"object")&&(e=a);if(e){for(h in this.paper.customAttributes)if(this.paper.customAttributes[c](h)&&e[c](h)&&f.is(this.paper.customAttributes[h],"function")){g=this.paper.customAttributes[h].apply(this,[].concat(e[h]));this.attrs[h]=
e[h];for(var i in g)g[c](i)&&(e[i]=g[i])}e.text&&this.type=="text"&&(this.node.string=e.text);ga(this,e);e.gradient&&({circle:1,ellipse:1}[c](this.type)||k(e.gradient).charAt()!="r")&&ja(this,e.gradient);(!la[c](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};O.toFront=function(){!this.removed&&this.Group.parentNode.appendChild(this.Group);this.paper.top!=this&&Oa(this,this.paper);return this};O.toBack=function(){if(this.removed)return this;this.Group.parentNode.firstChild!=this.Group&&
(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Pa(this,this.paper));return this};O.insertAfter=function(a){if(this.removed)return this;a.constructor==$&&(a=a[a.length-1]);a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode.appendChild(this.Group);Qa(this,a,this.paper);return this};O.insertBefore=function(a){if(this.removed)return this;a.constructor==$&&(a=a[0]);a.Group.parentNode.insertBefore(this.Group,a.Group);
Ra(this,a,this.paper);return this};O.blur=function(a){var c=this.node.runtimeStyle,d=c.filter,d=d.replace(qb,"");+a!==0?(this.attrs.blur=a,c.filter=d+M+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",c.margin=f.format("-{0}px 0 0 -{0}px",J(+a||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)};var Ua=function(a,c,d,e){var f=X("group"),i=X("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=ka;f.coordorigin=a.coordorigin;
f.appendChild(i);i=new R(i,f,a);i.type="circle";ga(i,{stroke:"#000",fill:"none"});i.attrs.cx=c;i.attrs.cy=d;i.attrs.r=e;i.setBox({x:c-e,y:d-e,width:e*2,height:e*2});a.canvas.appendChild(f);return i},ab=function(a,c,d,e,g){return g?f.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a+g,c,d-g*2,g,-g,e-g*2,g*2-d,g*2-e):f.format("M{0},{1}l{2},0,0,{3},{4},0z",a,c,d,e,-d)},Va=function(a,c,d,e,f,i){var g=ab(c,d,e,f,i),a=a.path(g),
h=a.attrs;a.X=h.x=c;a.Y=h.y=d;a.W=h.width=e;a.H=h.height=f;h.r=i;h.path=g;a.type="rect";return a},Wa=function(a,c,d,e,f){var i=X("group"),g=X("oval");i.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";i.coordsize=ka;i.coordorigin=a.coordorigin;i.appendChild(g);g=new R(g,i,a);g.type="ellipse";ga(g,{stroke:"#000"});g.attrs.cx=c;g.attrs.cy=d;g.attrs.rx=e;g.attrs.ry=f;g.setBox({x:c-e,y:d-f,width:e*2,height:f*2});a.canvas.appendChild(i);return g},Xa=function(a,c,
d,e,f,i){var g=X("group"),h=X("image");g.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";g.coordsize=ka;g.coordorigin=a.coordorigin;h.src=c;g.appendChild(h);h=new R(h,g,a);h.type="image";h.attrs.src=c;h.attrs.x=d;h.attrs.y=e;h.attrs.w=f;h.attrs.h=i;h.setBox({x:d,y:e,width:f,height:i});a.canvas.appendChild(g);return h},Ya=function(a,c,d,e){var g=X("group"),i=X("shape"),h=i.style,j=X("path"),o=X("textpath");g.style.cssText="position:absolute;left:0;top:0;width:"+
a.width+"px;height:"+a.height+"px";g.coordsize=ka;g.coordorigin=a.coordorigin;j.v=f.format("m{0},{1}l{2},{1}",J(c*10),J(d*10),J(c*10)+1);j.textpathok=!0;h.width=a.width;h.height=a.height;o.string=k(e);o.on=!0;i.appendChild(o);i.appendChild(j);g.appendChild(i);h=new R(o,g,a);h.shape=i;h.textpath=j;h.type="text";h.attrs.text=e;h.attrs.x=c;h.attrs.y=d;h.attrs.w=1;h.attrs.h=1;ga(h,{font:ma.font,stroke:"none",fill:"#000"});h.setBox();a.canvas.appendChild(g);return h},Za=function(a,c){var d=this.canvas.style;
a==+a&&(a+="px");c==+c&&(c+="px");d.width=a;d.height=c;d.clip="rect(0 "+a+" "+c+" 0)";return this},X;d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),X=function(a){return d.createElement("<rvml:"+a+' class="rvml">')}}catch(zb){X=function(a){return d.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}va=function(){var a=Na[z](0,arguments),c=a.container,e=a.height,h=a.width,j=
a.x,a=a.y;if(!c)throw Error("VML container not found.");var i=new g,o=i.canvas=d.createElement("div"),k=o.style,j=j||0,a=a||0,h=h||512,e=e||342;h==+h&&(h+="px");e==+e&&(e+="px");i.width=1E3;i.height=1E3;i.coordsize=1E4+M+1E4;i.coordorigin="0 0";i.span=d.createElement("span");i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";o.appendChild(i.span);k.cssText=f.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
h,e);c==1?(d.body.appendChild(o),k.left=j+"px",k.top=a+"px",k.position="absolute"):c.firstChild?c.insertBefore(o,c.firstChild):c.appendChild(o);za.call(i,i,f.fn);return i};G.clear=function(){this.canvas.innerHTML="";this.span=d.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};G.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=
Sa(a);return!0}}ba=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(ba&&ba[1]<4||navigator.platform.slice(0,2)=="iP")?G.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});j.setTimeout(function(){a.remove()})}:G.safari=function(){};for(var tb=function(){this.returnValue=!1},ub=function(){return this.originalEvent.preventDefault()},vb=function(){this.cancelBubble=!0},wb=function(){return this.originalEvent.stopPropagation()},
xb=function(){if(d.addEventListener)return function(a,d,e,f){var g=P&&L[d]?L[d]:d,i=function(g){if(P&&L[c](d))for(var i=0,h=g.targetTouches&&g.targetTouches.length;i<h;i++)if(g.targetTouches[i].target==a){h=g;g=g.targetTouches[i];g.originalEvent=h;g.preventDefault=ub;g.stopPropagation=wb;break}return e.call(f,g)};a.addEventListener(g,i,!1);return function(){a.removeEventListener(g,i,!1);return!0}};if(d.attachEvent)return function(a,c,d,e){var f=function(a){a=a||j.event;a.preventDefault=a.preventDefault||
tb;a.stopPropagation=a.stopPropagation||vb;return d.call(e,a)};a.attachEvent("on"+c,f);return function(){a.detachEvent("on"+c,f);return!0}}}(),ca=[],Ba=function(a){for(var c=a.clientX,e=a.clientY,f=d.documentElement.scrollTop||d.body.scrollTop,g=d.documentElement.scrollLeft||d.body.scrollLeft,i,h=ca.length;h--;){i=ca[h];if(P)for(var j=a.touches.length,o;j--;){if(o=a.touches[j],o.identifier==i.el._drag.id){c=o.clientX;e=o.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();
c+=g;e+=f;i.move&&i.move.call(i.move_scope||i.el,c-i.el._drag.x,e-i.el._drag.y,c,e,a)}},Ca=function(a){f.unmousemove(Ba).unmouseup(Ca);for(var c=ca.length,d;c--;)d=ca[c],d.el._drag={},d.end&&d.end.call(d.end_scope||d.start_scope||d.move_scope||d.el,a);ca=[]},ba=K[o];ba--;)(function(a){f[a]=R[m][a]=function(c,e){if(f.is(c,"function"))this.events=this.events||[],this.events.push({name:a,f:c,unbind:xb(this.shape||this.node||d,a,c,e||this)});return this};f["un"+a]=R[m]["un"+a]=function(c){for(var d=this.events,
e=d[o];e--;)if(d[e].name==a&&d[e].f==c){d[e].unbind();d.splice(e,1);!d.length&&delete this.events;break}return this}})(K[ba]);O.hover=function(a,c,d,e){return this.mouseover(a,d).mouseout(c,e||d)};O.unhover=function(a,c){return this.unmouseover(a).unmouseout(c)};O.drag=function(a,c,e,g,h,i){this._drag={};this.mousedown(function(j){(j.originalEvent||j).preventDefault();var o=d.documentElement.scrollTop||d.body.scrollTop,k=d.documentElement.scrollLeft||d.body.scrollLeft;this._drag.x=j.clientX+k;this._drag.y=
j.clientY+o;this._drag.id=j.identifier;c&&c.call(h||g||this,j.clientX+k,j.clientY+o,j);!ca.length&&f.mousemove(Ba).mouseup(Ca);ca.push({el:this,move:a,end:e,move_scope:g,start_scope:h,end_scope:i})});return this};O.undrag=function(a,c,d){for(c=ca.length;c--;)ca[c].el==this&&ca[c].move==a&&ca[c].end==d&&ca.splice(c++,1);!ca.length&&f.unmousemove(Ba).unmouseup(Ca)};G.circle=function(a,c,d){return Ua(this,a||0,c||0,d||0)};G.rect=function(a,c,d,e,f){return Va(this,a||0,c||0,d||0,e||0,f||0)};G.ellipse=
function(a,c,d,e){return Wa(this,a||0,c||0,d||0,e||0)};G.path=function(a){a&&!f.is(a,"string")&&!f.is(a[0],Y)&&(a+="");return Ta(f.format[z](f,arguments),this)};G.image=function(a,c,d,e,f){return Xa(this,a||"about:blank",c||0,d||0,e||0,f||0)};G.text=function(a,c,d){return Ya(this,a||0,c||0,k(d))};G.set=function(a){arguments[o]>1&&(a=Array[m].splice.call(arguments,0,arguments[o]));return new $(a)};G.setSize=Za;G.top=G.bottom=null;G.raphael=f;O.resetScale=function(){if(this.removed)return this;this._.sx=
1;this._.sy=1;this.attrs.scale="1 1"};O.scale=function(a,c,d,e){if(this.removed)return this;if(a==null&&c==null)return{x:this._.sx,y:this._.sy,toString:q};c=c||a;!+c&&(c=a);var f,g,h=this.attrs;if(a!=0){var j=this.getBBox(),k=j.x+j.width/2,l=j.y+j.height/2;f=U(a/this._.sx);g=U(c/this._.sy);var d=+d||d==0?d:k,e=+e||e==0?e:l,w=this._.sx>0,m=this._.sy>0,j=~~(a/U(a)),n=~~(c/U(c)),r=f*j,p=g*n,C=this.node.style,k=d+U(k-d)*r*(k>d==w?1:-1),l=e+U(l-e)*p*(l>e==m?1:-1),B=a*j>c*n?g:f;switch(this.type){case "rect":case "image":var s=
h.width*f,z=h.height*g;this.attr({height:z,r:h.r*B,width:s,x:k-s/2,y:l-z/2});break;case "circle":case "ellipse":this.attr({rx:h.rx*f,ry:h.ry*g,r:h.r*B,cx:k,cy:l});break;case "text":this.attr({x:k,y:l});break;case "path":for(var B=ya(h.path),G=!0,w=w?r:f,m=m?p:g,p=0,r=B[o];p<r;p++){var H=B[p],u=fa.call(H[0]);if(!(u=="M"&&G))if(G=!1,u=="A")H[B[p][o]-2]*=w,H[B[p][o]-1]*=m,H[1]*=f,H[2]*=g,H[5]=+(j+n?!!+H[5]:!+H[5]);else if(u=="H")for(var u=1,y=H[o];u<y;u++)H[u]*=w;else if(u=="V"){u=1;for(y=H[o];u<y;u++)H[u]*=
m}else{u=1;for(y=H[o];u<y;u++)H[u]*=u%2?w:m}}g=qa(B);f=k-g.x-g.width/2;g=l-g.y-g.height/2;B[0][1]+=f;B[0][2]+=g;this.attr({path:B})}this.type in{text:1,image:1}&&(j!=1||n!=1)?this.transformations?(this.transformations[2]="scale(".concat(j,",",n,")"),this.node.setAttribute("transform",this.transformations[v](M)),f=j==-1?-h.x-(s||0):h.x,g=n==-1?-h.y-(z||0):h.y,this.attr({x:f,y:g}),h.fx=j-1,h.fy=n-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11=".concat(j,", M12=0, M21=0, M22=",
n,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),C.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||"")):this.transformations?(this.transformations[2]="",this.node.setAttribute("transform",this.transformations[v](M)),h.fx=0,h.fy=0):(this.node.filterMatrix="",C.filter=(this.node.filterMatrix||"")+(this.node.filterOpacity||""));h.scale=[a,c,d,e][v](M);this._.sx=a;this._.sy=c}return this};O.clone=function(){if(this.removed)return null;var a=this.attr();delete a.scale;
delete a.translation;return this.paper[this.type]().attr(a)};var Da={},ta=function(a,c,d,e,g,h,j,o,k){var l=0,v=100,w=[a,c,d,e,g,h,j,o].join(),m=Da[w],n,r;!m&&(Da[w]=m={data:[]});m.timer&&clearTimeout(m.timer);m.timer=setTimeout(function(){delete Da[w]},2E3);k!=null&&(v=~~ta(a,c,d,e,g,h,j,o)*10);for(var p=0;p<v+1;p++){m.data[k]>p?r=m.data[p*v]:(r=f.findDotsAtSegment(a,c,d,e,g,h,j,o,p/v),m.data[p]=r);p&&(l+=H(H(n.x-r.x,2)+H(n.y-r.y,2),0.5));if(k!=null&&l>=k)return r;n=r}if(k==null)return l},K=function(a,
c){return function(d,e,g){for(var d=pa(d),h,j,o,k,l="",w={},m=0,n=0,r=d.length;n<r;n++){o=d[n];if(o[0]=="M")h=+o[1],j=+o[2];else{k=ta(h,j,o[1],o[2],o[3],o[4],o[5],o[6]);if(m+k>e){if(c&&!w.start){h=ta(h,j,o[1],o[2],o[3],o[4],o[5],o[6],e-m);l+=["C",h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(g)return l;w.start=l;l=["M",h.x,h.y+"C",h.n.x,h.n.y,h.end.x,h.end.y,o[5],o[6]][v]();m+=k;h=+o[5];j=+o[6];continue}if(!a&&!c)return h=ta(h,j,o[1],o[2],o[3],o[4],o[5],o[6],e-m),{x:h.x,y:h.y,alpha:h.alpha}}m+=k;h=
+o[5];j=+o[6]}l+=o}w.end=l;h=a?m:c?w:f.findDotsAtSegment(h,j,o[1],o[2],o[3],o[4],o[5],o[6],1);h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha});return h}},bb=K(1),ua=K(),Ea=K(0,1);O.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return bb(this.attrs.path)}};O.getPointAtLength=function(a){if(this.type=="path")return ua(this.attrs.path,a)};O.getSubpath=function(a,c){if(this.type=="path"){if(U(this.getTotalLength()-c)<"1e-6")return Ea(this.attrs.path,
a).end;var d=Ea(this.attrs.path,c,1);return a?Ea(d,a).end:d}};f.easing_formulas={linear:function(a){return a},"<":function(a){return H(a,3)},">":function(a){return H(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return H(a,3)/2;a-=2;return(H(a,3)+2)/2},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){if(a==0||a==1)return a;return H(2,-10*a)*r.sin((a-0.075)*2*W/0.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/
2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}};var da=[],cb=function(){for(var a=+new Date,d=0;d<da[o];d++){var e=da[d];if(!e.stop&&!e.el.removed){var h=a-e.start,g=e.ms,i=e.easing,j=e.from,k=e.diff,w=e.to,l=e.t,m=e.el,e={},n;if(h<g){var h=i(h/g),r;for(r in j)if(j[c](r)){switch(wa[r]){case "along":n=h*g*k[r];w.back&&(n=w.len-n);i=ua(w[r],n);m.translate(k.sx-k.x||0,k.sy-k.y||0);k.x=i.x;k.y=i.y;m.translate(i.x-k.sx,i.y-k.sy);w.rot&&
m.rotate(k.r+i.alpha,i.x,i.y);break;case V:n=+j[r]+h*g*k[r];break;case "colour":n="rgb("+[Fa(J(j[r].r+h*g*k[r].r)),Fa(J(j[r].g+h*g*k[r].g)),Fa(J(j[r].b+h*g*k[r].b))][v](",")+")";break;case "path":n=[];for(var i=0,p=j[r][o];i<p;i++){n[i]=[j[r][i][0]];for(var q=1,C=j[r][i][o];q<C;q++)n[i][q]=+j[r][i][q]+h*g*k[r][i][q];n[i]=n[i][v](M)}n=n[v](M);break;case "csv":switch(r){case "translation":n=h*g*k[r][0]-l.x;i=h*g*k[r][1]-l.y;l.x+=n;l.y+=i;n=n+M+i;break;case "rotation":n=+j[r][0]+h*g*k[r][0];j[r][1]&&
(n+=","+j[r][1]+","+j[r][2]);break;case "scale":n=[+j[r][0]+h*g*k[r][0],+j[r][1]+h*g*k[r][1],2 in w[r]?w[r][2]:"",3 in w[r]?w[r][3]:""][v](M);break;case "clip-rect":n=[];for(i=4;i--;)n[i]=+j[r][i]+h*g*k[r][i]}break;default:p=[].concat(j[r]);n=[];for(i=m.paper.customAttributes[r].length;i--;)n[i]=+p[i]+h*g*k[r][i]}e[r]=n}m.attr(e);m._run&&m._run.call(m)}else w.along&&(i=ua(w.along,w.len*!w.back),m.translate(k.sx-(k.x||0)+i.x-k.sx,k.sy-(k.y||0)+i.y-k.sy),w.rot&&m.rotate(k.r+i.alpha,i.x,i.y)),(l.x||
l.y)&&m.translate(-l.x,-l.y),w.scale&&(w.scale+=""),m.attr(w),da.splice(d--,1)}}f.svg&&m&&m.paper&&m.paper.safari();da[o]&&setTimeout(cb)},yb=function(a,c,d,e,h){var g=d-e;c.timeouts.push(setTimeout(function(){f.is(h,"function")&&h.call(c);c.animate(a,g,a.easing)},e))},Fa=function(a){return C(B(a,255),0)},sa=function(a,c){if(a==null)return{x:this._.tx,y:this._.ty,toString:q};this._.tx+=+a;this._.ty+=+c;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+this.attrs.cx,cy:+c+this.attrs.cy});
break;case "rect":case "image":case "text":this.attr({x:+a+this.attrs.x,y:+c+this.attrs.y});break;case "path":var d=ya(this.attrs.path);d[0][1]+=+a;d[0][2]+=+c;this.attr({path:d})}return this};O.animateWith=function(a,c,d,e,h){for(var f=0,g=da.length;f<g;f++)da[f].el.id==a.id&&(c.start=da[f].start);return this.animate(c,d,e,h)};O.animateAlong=y();O.animateAlongBack=y(1);O.onAnimation=function(a){this._run=a||0;return this};O.animate=function(a,d,h,g){var j=this;j.timeouts=j.timeouts||[];if(f.is(h,
"function")||!h)g=h||null;if(j.removed)return g&&g.call(j),j;var i={},w={},m=!1,v={},l;for(l in a)if(a[c](l)&&(wa[c](l)||j.paper.customAttributes[c](l)))switch(m=!0,i[l]=j.attr(l),i[l]==null&&(i[l]=ma[l]),w[l]=a[l],wa[l]){case "along":var r=bb(a[l]),p=ua(a[l],r*!!a.back),q=j.getBBox();v[l]=r/d;v.tx=q.x;v.ty=q.y;v.sx=p.x;v.sy=p.y;w.rot=a.rot;w.back=a.back;w.len=r;a.rot&&(v.r=E(j.rotate())||0);break;case V:v[l]=(w[l]-i[l])/d;break;case "colour":i[l]=f.getRGB(i[l]);r=f.getRGB(w[l]);v[l]={r:(r.r-i[l].r)/
d,g:(r.g-i[l].g)/d,b:(r.b-i[l].b)/d};break;case "path":r=pa(i[l],w[l]);i[l]=r[0];q=r[1];v[l]=[];r=0;for(p=i[l][o];r<p;r++){v[l][r]=[0];for(var C=1,B=i[l][r][o];C<B;C++)v[l][r][C]=(q[r][C]-i[l][r][C])/d}break;case "csv":p=k(a[l]).split(n);q=k(i[l]).split(n);switch(l){case "translation":i[l]=[0,0];v[l]=[p[0]/d,p[1]/d];break;case "rotation":i[l]=q[1]==p[1]&&q[2]==p[2]?q:[0,p[1],p[2]];v[l]=[(p[0]-i[l][0])/d,0,0];break;case "scale":a[l]=p;i[l]=k(i[l]).split(n);v[l]=[(p[0]-i[l][0])/d,(p[1]-i[l][1])/d,0,
0];break;case "clip-rect":i[l]=k(i[l]).split(n);v[l]=[];for(r=4;r--;)v[l][r]=(p[r]-i[l][r])/d}w[l]=p;break;default:p=[].concat(a[l]);q=[].concat(i[l]);v[l]=[];for(r=j.paper.customAttributes[l][o];r--;)v[l][r]=((p[r]||0)-(q[r]||0))/d}if(m){l=f.easing_formulas[h];if(!l)if((l=k(h).match(Z))&&l[o]==5){var H=l;l=function(a){return e(a,+H[1],+H[2],+H[3],+H[4],d)}}else l=function(a){return a};da.push({start:a.start||+new Date,ms:d,easing:l,from:i,diff:v,to:w,el:j,t:{x:0,y:0}});f.is(g,"function")&&(j._ac=
setTimeout(function(){g.call(j)},d));da[o]==1&&setTimeout(cb)}else{var h=[],s,u;for(u in a)if(a[c](u)&&fb.test(u))l={value:a[u]},u=="from"&&(u=0),u=="to"&&(u=100),l.key=aa(u,10),h.push(l);h.sort(kb);h[0].key&&h.unshift({key:0,value:j.attrs});r=0;for(p=h[o];r<p;r++)yb(h[r].value,j,d/100*h[r].key,d/100*(h[r-1]&&h[r-1].key||0),h[r-1]&&h[r-1].value.callback);(s=h[h[o]-1].value.callback)&&j.timeouts.push(setTimeout(function(){s.call(j)},d))}return this};O.stop=function(){for(var a=0;a<da.length;a++)da[a].el.id==
this.id&&da.splice(a--,1);a=0;for(ii=this.timeouts&&this.timeouts.length;a<ii;a++)clearTimeout(this.timeouts[a]);this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};O.translate=function(a,c){return this.attr({translation:a+" "+c})};O[ea]=function(){return"Rapha\u00ebl\u2019s object"};f.ae=da;var $=function(a){this.items=[];this[o]=0;this.type="set";if(a)for(var c=0,d=a[o];c<d;c++)if(a[c]&&(a[c].constructor==R||a[c].constructor==$))this[this.items[o]]=this.items[this.items[o]]=a[c],
this[o]++};$[m][S]=function(){for(var a,c,d=0,e=arguments[o];d<e;d++)if((a=arguments[d])&&(a.constructor==R||a.constructor==$))c=this.items[o],this[c]=this.items[c]=a,this[o]++;return this};$[m].pop=function(){delete this[this[o]--];return this.items.pop()};for(var Ga in O)O[c](Ga)&&($[m][Ga]=function(a){return function(){for(var c=0,d=this.items[o];c<d;c++)this.items[c][a][z](this.items[c],arguments);return this}}(Ga));$[m].attr=function(a,c){if(a&&f.is(a,Y)&&f.is(a[0],"object"))for(var d=0,e=a[o];d<
e;d++)this.items[d].attr(a[d]);else{d=0;for(e=this.items[o];d<e;d++)this.items[d].attr(a,c)}return this};$[m].animate=function(a,c,d,e){(f.is(d,"function")||!d)&&(e=d||null);var h=this.items[o],g=h,j,k=this,v;e&&(v=function(){!--h&&e.call(k)});d=f.is(d,"string")?d:v;for(j=this.items[--g].animate(a,c,d,v);g--;)this.items[g]&&!this.items[g].removed&&this.items[g].animateWith(j,a,c,d,v);return this};$[m].insertAfter=function(a){for(var c=this.items[o];c--;)this.items[c].insertAfter(a);return this};$[m].getBBox=
function(){for(var a=[],c=[],d=[],e=[],h=this.items[o];h--;){var g=this.items[h].getBBox();a[S](g.x);c[S](g.y);d[S](g.x+g.width);e[S](g.y+g.height)}a=B[z](0,a);c=B[z](0,c);return{x:a,y:c,width:C[z](0,d)-a,height:C[z](0,e)-c}};$[m].clone=function(a){for(var a=new $,c=0,d=this.items[o];c<d;c++)a[S](this.items[c].clone());return a};f.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var d={w:a.w,face:{},glyphs:{}},e=a.face["font-family"],h;for(h in a.face)a.face[c](h)&&(d.face[h]=
a.face[h]);this.fonts[e]?this.fonts[e][S](d):this.fonts[e]=[d];if(!a.svg){d.face["units-per-em"]=aa(a.face["units-per-em"],10);for(var g in a.glyphs)if(a.glyphs[c](g)&&(e=a.glyphs[g],d.glyphs[g]={w:e.w,k:{},d:e.d&&"M"+e.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},e.k))for(var f in e.k)e[c](f)&&(d.glyphs[g].k[f]=e.k[f])}return a};G.getFont=function(a,d,e,h){h=h||"normal";e=e||"normal";d=+d||{normal:400,bold:700,lighter:300,bolder:800}[d]||400;if(f.fonts){var g=
f.fonts[a];if(!g){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),j;for(j in f.fonts)if(f.fonts[c](j)&&a.test(j)){g=f.fonts[j];break}}var k;if(g){j=0;for(a=g[o];j<a;j++)if(k=g[j],k.face["font-weight"]==d&&(k.face["font-style"]==e||!k.face["font-style"])&&k.face["font-stretch"]==h)break}return k}};G.print=function(a,c,d,e,h,g,j){var g=g||"middle",j=C(B(j||0,1),-1),v=this.set(),w=k(d).split(""),l=0;f.is(e,d)&&(e=this.getFont(e));if(e){for(var d=(h||16)/e.face["units-per-em"],
r=e.face.bbox.split(n),h=+r[0],g=+r[1]+(g=="baseline"?r[3]-r[1]+ +e.face.descent:(r[3]-r[1])/2),r=0,m=w[o];r<m;r++){var p=r&&e.glyphs[w[r-1]]||{},q=e.glyphs[w[r]];l+=r?(p.w||e.w)+(p.k&&p.k[w[r]]||0)+e.w*j:0;q&&q.d&&v[S](this.path(q.d).attr({fill:"#000",stroke:"none",translation:[l,0]}))}v.scale(d,d,h,g).translate(a-h,c-g)}return v};f.format=function(a,c){var d=f.is(c,Y)?[0].concat(c):arguments;a&&f.is(a,"string")&&d[o]-1&&(a=a.replace(h,function(a,c){return d[++c]==null?"":d[c]}));return a||""};f.ninja=
function(){a.was?j.Raphael=a.is:delete Raphael;return f};f.el=O;f.st=$[m];a.was?j.Raphael=f:Raphael=f})();(function(){function f(a){return(a+"").replace(P,"")}function s(a,c,d){for(var e=a.length;e<c;e++)a=d?"0"+a:a+"0";return a}function u(a){return L.call(a)==="[object Array]"}function q(a,c){if(a.indexOf)return a.indexOf(c);for(var d=0,e=a.length;d<e;d++)if(a[d]===c)return d;return-1}function y(a,c,d){var e=c["-"],c=c["+"],h;switch(d){case "n -":e=" "+e,c=" "+c;case "n-":a.substr(a.length-e.length)===e?h=["-",a.substr(0,a.length-e.length)]:a.substr(a.length-c.length)===c&&(h=["+",a.substr(0,a.length-
c.length)]);break;case "- n":e+=" ",c+=" ";case "-n":a.indexOf(e)===0?h=["-",a.substr(e.length)]:a.indexOf(c)===0&&(h=["+",a.substr(c.length)]);break;case "(n)":a.indexOf("(")===0&&a.substr(a.length-1)===")"&&(h=["-",a.substr(1,a.length-2)])}return h||["",a]}function e(a,c){if(!c)return 0;for(var d,e=a.getTime(),h=0,g=c.length;h<g;h++)if(d=c[h].start,d===null||e>=d)return h;return 0}function n(a){return a.split("\u00a0").join(" ").toUpperCase()}function p(a){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=
n(a[d]);return c}function h(a,c,d,e){a=a.getFullYear();!e&&c.eras&&(a-=c.eras[d].offset);return a}function m(a,c){for(var d=0,e=!1,h=0,g=a.length;h<g;h++){var f=a.charAt(h);switch(f){case "'":e?c.push("'"):d++;e=!1;break;case "\\":e&&c.push("\\");e=!e;break;default:c.push(f),e=!1}}return d}function c(a,c){var c=c||"F",d;d=a.patterns;var e=c.length;if(e===1){d=d[c];if(!d)throw"Invalid date format string '"+c+"'.";c=d}else e===2&&c.charAt(0)==="%"&&(c=c.charAt(1));return c}function d(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}
function j(a,g,j){a=f(a);j=j.calendar;a:{var k=j._parseRegExp;if(k){var C=k[g];if(C){g=C;break a}}else j._parseRegExp=k={};for(var C=c(j,g).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),B=["^"],u=[],H=0,s=0,z=d(),G;(G=z.exec(C))!==null;){var y=C.slice(H,G.index),H=z.lastIndex;s+=m(y,B);if(s%2)B.push(G[0]);else{var y=G[0],M=y.length;switch(y){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":y="(\\D+)";break;case "tt":case "t":y="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":y=
"(\\d{"+M+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":y="(\\d\\d?)";break;case "zzz":y="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":y="([+-]?\\d\\d?)";break;case "/":y="(\\"+j["/"]+")";break;default:throw"Invalid date format pattern '"+y+"'.";}y&&B.push(y);u.push(G[0])}}m(C.slice(H),B);B.push("$");C={regExp:B.join("").replace(/\s+/g,"\\s+"),groups:u};g=k[g]=C}s=RegExp(g.regExp).exec(a);if(s===null)return null;
var z=g.groups,P=a=null,K=null,L=g=null,u=B=C=k=0;G=null;H=!1;y=0;for(M=z.length;y<M;y++){var Q=s[y+1];if(Q){var Z=z[y],J=Z.length,E=parseInt(Q,10);switch(Z){case "dd":case "d":g=E;if(g<1||g>31)return null;break;case "MMM":case "MMMM":var K=j,J=J===3,Z=K.months,aa=K.monthsGenitive||K.months,fa=K._upperMonths,E=K._upperMonthsGen;if(!fa)K._upperMonths=fa=[p(Z.names),p(Z.namesAbbr)],K._upperMonthsGen=E=[p(aa.names),p(aa.namesAbbr)];Q=n(Q);K=q(J?fa[1]:fa[0],Q);K<0&&(K=q(J?E[1]:E[0],Q));if(K<0||K>11)return null;
break;case "M":case "MM":K=E-1;if(K<0||K>11)return null;break;case "y":case "yy":case "yyyy":if(J<4){P=j;Q=E;E=new Date;Z=e(E);if(Q<100)J=P.twoDigitYearMax,J=typeof J==="string"?(new Date).getFullYear()%100+parseInt(J,10):J,P=h(E,P,Z),Q+=P-P%100,Q>J&&(Q-=100);P=Q}else P=E;if(P<0||P>9999)return null;break;case "h":case "hh":k=E;k===12&&(k=0);if(k<0||k>11)return null;break;case "H":case "HH":k=E;if(k<0||k>23)return null;break;case "m":case "mm":C=E;if(C<0||C>59)return null;break;case "s":case "ss":B=
E;if(B<0||B>59)return null;break;case "tt":case "t":H=j.PM&&(Q===j.PM[0]||Q===j.PM[1]||Q===j.PM[2]);if(!H&&(!j.AM||Q!==j.AM[0]&&Q!==j.AM[1]&&Q!==j.AM[2]))return null;break;case "f":case "ff":case "fff":u=E*Math.pow(10,3-J);if(u<0||u>999)return null;break;case "ddd":case "dddd":L=Q;Q=J===3;E=void 0;E=j.days;J=j._upperDays;if(!J)j._upperDays=J=[p(E.names),p(E.namesAbbr),p(E.namesShort)];L=n(L);Q?(E=q(J[1],L),E===-1&&(E=q(J[2],L))):E=q(J[0],L);L=E;if(L<0||L>6)return null;break;case "zzz":J=Q.split(/:/);
if(J.length!==2)return null;G=parseInt(J[0],10);if(G<-12||G>13)return null;J=parseInt(J[1],10);if(J<0||J>59)return null;G=G*60+(Q.indexOf("-")===0?-J:J);break;case "z":case "zz":G=E;if(G<-12||G>13)return null;G*=60;break;case "g":case "gg":if(!Q||!j.eras)return null;Q=f(Q.toLowerCase());J=0;for(E=j.eras.length;J<E;J++)if(Q===j.eras[J].name.toLowerCase()){a=J;break}if(a===null)return null}}}s=new Date;z=(y=j.convert)?y.fromGregorian(s)[0]:s.getFullYear();P===null?P=z:j.eras&&(P+=j.eras[a||0].offset);
K===null&&(K=0);g===null&&(g=1);if(y){if(s=y.toGregorian(P,K,g),s===null)return null}else{s.setFullYear(P,K,g);if(s.getDate()!==g)return null;if(L!==null&&s.getDay()!==L)return null}H&&k<12&&(k+=12);s.setHours(k,C,B,u);G!==null&&(j=s.getMinutes()-(G+s.getTimezoneOffset()),s.setHours(s.getHours()+parseInt(j/60,10),j%60));return s}function a(g,f,j){function k(a,c){var d;d=a+"";if(c>1&&d.length<c)return d=y[c-2]+d,d.substr(d.length-c,c);return d}function n(){if(M||P)return M;M=K.test(f);P=!0;return M}
function p(a,c){if(Z)return Z[c];switch(c){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate()}}var q=j.calendar,s=q.convert;if(!f||!f.length||f==="i"){if(j&&j.name.length)if(s)j=a(g,q.patterns.F,j);else{var j=new Date(g.getTime()),u=e(g,q.eras);j.setFullYear(h(g,q,u));j=j.toLocaleString()}else j=g.toString();return j}var u=q.eras,G=f==="s",f=c(q,f),j=[],z,y=["0","00","000"],M,P,K=/([^d]|^)(d|dd)([^d]|$)/g,L=0,Q=d(),Z;for(!G&&s&&(Z=s.fromGregorian(g));;){z=Q.lastIndex;
s=Q.exec(f);z=f.slice(z,s?s.index:f.length);L+=m(z,j);if(!s)break;if(L%2)j.push(s[0]);else switch(z=s[0],s=z.length,z){case "ddd":case "dddd":j.push((s===3?q.days.namesAbbr:q.days.names)[g.getDay()]);break;case "d":case "dd":M=!0;j.push(k(p(g,2),s));break;case "MMM":case "MMMM":z=p(g,1);j.push(q.monthsGenitive&&n()?q.monthsGenitive[s===3?"namesAbbr":"names"][z]:q.months[s===3?"namesAbbr":"names"][z]);break;case "M":case "MM":j.push(k(p(g,1)+1,s));break;case "y":case "yy":case "yyyy":z=Z?Z[0]:h(g,
q,e(g,u),G);s<4&&(z%=100);j.push(k(z,s));break;case "h":case "hh":z=g.getHours()%12;z===0&&(z=12);j.push(k(z,s));break;case "H":case "HH":j.push(k(g.getHours(),s));break;case "m":case "mm":j.push(k(g.getMinutes(),s));break;case "s":case "ss":j.push(k(g.getSeconds(),s));break;case "t":case "tt":z=g.getHours()<12?q.AM?q.AM[0]:" ":q.PM?q.PM[0]:" ";j.push(s===1?z.charAt(0):z);break;case "f":case "ff":case "fff":j.push(k(g.getMilliseconds(),3).substr(0,s));break;case "z":case "zz":z=g.getTimezoneOffset()/
60;j.push((z<=0?"+":"-")+k(Math.floor(Math.abs(z)),s));break;case "zzz":z=g.getTimezoneOffset()/60;j.push((z<=0?"+":"-")+k(Math.floor(Math.abs(z)),2)+":"+k(Math.abs(g.getTimezoneOffset()%60),2));break;case "g":case "gg":q.eras&&j.push(q.eras[e(g,u)].name);break;case "/":j.push(q["/"]);break;default:throw"Invalid date format pattern '"+z+"'.";}}return j.join("")}var g={},G={en:{}};G["default"]=G.en;g.extend=function(a){for(var c=arguments[1]||{},d=2,e=arguments.length;d<e;d++){var g=arguments[d];if(g)for(var h in g){var f=
g[h];if(typeof f!=="undefined")if(a&&(L.call(f)==="[object Object]"||u(f))){var j=c[h],j=j&&(L.call(j)==="[object Object]"||u(j))?j:u(f)?[]:{};c[h]=this.extend(!0,j,f)}else c[h]=f}}return c};g.findClosestCulture=function(a){var c;if(!a)return this.culture||this.cultures["default"];L.call(a)==="[object String]"&&(a=a.split(","));if(u(a)){var d,e=this.cultures,g=a,h,j=g.length,k=[];for(h=0;h<j;h++)a=f(g[h]),a=a.split(";"),d=f(a[0]),a.length===1?a=1:(a=f(a[1]),a.indexOf("q=")===0?(a=a.substr(2),a=parseFloat(a,
10),a=isNaN(a)?0:a):a=1),k.push({lang:d,pri:a});k.sort(function(a,c){return a.pri<c.pri?1:-1});for(h=0;h<j;h++)if(d=k[h].lang,c=e[d])return c;for(h=0;h<j;h++){d=k[h].lang;do{g=d.lastIndexOf("-");if(g===-1)break;d=d.substr(0,g);if(c=e[d])return c}while(1)}for(h=0;h<j;h++){d=k[h].lang;for(var m in e)if(g=e[m],g.language==d)return g}}else if(typeof a==="object")return a;return c||null};g.preferCulture=function(a){this.culture=this.findClosestCulture(a)||this.cultures["default"]};g.localize=function(a,
c,d){typeof c!=="string"&&(c=this.culture.name||this.culture||"default");var c=this.cultures[c]||{name:c},e=G[c.name];arguments.length===3?(e||(e=G[c.name]={}),e[a]=d):(e&&(d=e[a]),typeof d==="undefined"&&((e=G[c.language])&&(d=e[a]),typeof d==="undefined"&&(d=G["default"][a])));return typeof d==="undefined"?null:d};g.format=function(c,d,e){e=this.findClosestCulture(e);if(typeof c==="number"){var g=c;if(!d||d==="i")c=e.name.length?g.toLocaleString():g.toString();else{var d=d||"D",e=e.numberFormat,
c=Math.abs(g),h=-1;d.length>1&&(h=parseInt(d.slice(1),10));var f=d.charAt(0).toUpperCase(),j;switch(f){case "D":d="n";h!==-1&&(c=s(""+c,h,!0));g<0&&(c=-c);break;case "N":j=e;case "C":j=j||e.currency;case "P":j=j||e.percent;d=g<0?j.pattern[0]:j.pattern[1]||"n";if(h===-1)h=j.decimals;b:{var k=c*(f==="P"?100:1),f=j;j=f.groupSizes;var c=j[0],g=1,m=Math.pow(10,h),n=Math.round(k*m)/m;isFinite(n)||(n=k);m="";m=(n+"").split(/e/i);n=m.length>1?parseInt(m[1],10):0;k=m[0];m=k.split(".");k=m[0];m=m.length>1?
m[1]:"";n>0?(m=s(m,n,!1),k+=m.slice(0,n),m=m.substr(n)):n<0&&(n=-n,k=s(k,n+1),m=k.slice(-n,k.length)+m,k=k.slice(0,-n));m=h>0?f["."]+(m.length>h?m.slice(0,h):s(m,h)):"";h=k.length-1;f=f[","];for(n="";h>=0;){if(c===0||c>h){c=k.slice(0,h+1)+(n.length?f+n+m:m);break b}n=k.slice(h-c+1,h+1)+(n.length?f+n:"");h-=c;g<j.length&&(c=j[g],g++)}c=k.slice(0,h+1)+f+n+m}break;default:throw"Bad number format specifier: "+f;}j=/n|\$|-|%/g;for(g="";;){h=j.lastIndex;f=j.exec(d);g+=d.slice(h,f?f.index:d.length);if(!f)break;
switch(f[0]){case "n":g+=c;break;case "$":g+=e.currency.symbol;break;case "-":/[1-9]/.test(c)&&(g+=e["-"]);break;case "%":g+=e.percent.symbol}}c=g}}else c instanceof Date&&(c=a(c,d,e));return c};g.parseInt=function(a,c,d){return Math.floor(this.parseFloat(a,c,d))};g.parseFloat=function(a,c,d){typeof c==="string"&&(d=c,c=10);var d=this.findClosestCulture(d),e=NaN,g=d.numberFormat;a.indexOf(d.numberFormat.currency.symbol)>-1&&(a=a.replace(d.numberFormat.currency.symbol,""),a=a.replace(d.numberFormat.currency["."],
d.numberFormat["."]));a=f(a);if(M.test(a))e=parseFloat(a,c);else if(!c&&k.test(a))e=parseInt(a,16);else{d=y(a,g,g.pattern[0]);c=d[0];d=d[1];c===""&&g.pattern[0]!=="-n"&&(d=y(a,g,"-n"),c=d[0],d=d[1]);var c=c||"+",h,a=d.indexOf("e");a<0&&(a=d.indexOf("E"));a<0?(h=d,a=null):(h=d.substr(0,a),a=d.substr(a+1));var j=g["."],m=h.indexOf(j);m<0?(d=h,h=null):(d=h.substr(0,m),h=h.substr(m+j.length));j=g[","];d=d.split(j).join("");m=j.replace(/\u00A0/g," ");j!==m&&(d=d.split(m).join(""));c+=d;h!==null&&(c+="."+
h);a!==null&&(g=y(a,g,"-n"),c+="e"+(g[0]||"+")+g[1]);K.test(c)&&(e=parseFloat(c))}return e};g.parseDate=function(a,c,d){var d=this.findClosestCulture(d),e,g;if(c){if(typeof c==="string"&&(c=[c]),c.length){g=0;for(var h=c.length;g<h;g++){var f=c[g];if(f&&(e=j(a,f,d)))break}}}else for(g in c=d.calendar.patterns,c)if(e=j(a,c[g],d))break;return e||null};var z=g.cultures=g.cultures||{},z=z["default"]=z.en=g.extend(!0,{name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January",
"February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},z.en);
z.calendar=z.calendar||z.calendars.standard;var P=/^\s+|\s+$/g,M=/^[+-]?infinity$/i,k=/^0x[a-f0-9]+$/i,K=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,L=Object.prototype.toString;jQuery.global=g})();(function(f){var s=f.global.cultures,u=s.en,f=s["de-DE"]=f.extend(!0,{},u,{name:"de-DE",englishName:"German (Germany)",nativeName:"Deutsch (Deutschland)",language:"de",numberFormat:{",":".",".":",",percent:{pattern:["-n%","n%"],",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"\u20ac"}},calendars:{standard:f.extend(!0,{},u.calendars.standard,{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di",
"Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","M\u00e4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,eras:[{name:"n. Chr.",start:null,offset:0}],patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}})}},
s["de-DE"]);f.calendar=f.calendars.standard})(jQuery);/*

 jQuery Tiny Pub/Sub - v0.3pre - 11/4/2010
 http://benalman.com/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
(function(f){var s=f({});f.subscribe=function(){s.bind.apply(s,arguments)};f.unsubscribe=function(){s.unbind.apply(s,arguments)};f.publish=function(){s.trigger.apply(s,arguments)}})(jQuery);/*
 
 copyright 2011, Mnemograph LLC
 Timeglider for Javascript / jQuery 
 http://timeglider.com/jquery

 Licensed under the MIT open source license
 http://timeglider.com/jquery/?p=license

*/
var timeglider=window.timeglider={version:"0.1.0"};
(function(f){var f=timeglider,s=jQuery,u={},q={},y={},e={},n={};f.TG_Date=function(e,f){function c(a){var c=Math.abs(a.rd)*86400,d=a.ho*3600,e=(a.mi-1)*60,h=1;a.rd<0&&(h=-1);return h*(c+d+e)}var d,j,a;typeof e=="number"?(d=j=p.getDateFromSec(e),a=e):(e=="today"&&(e=p.getToday()),d=j=e);if(function(a){a=jQuery.trim(a);reg=RegExp(/[T0-9-: ]/);return reg.test(a)?a:!1}(d)===!1)return{error:"Invalid date"};else d=d.replace(",",""),d.substr(0,1)=="-"?(this.bce=1,d=d.substr(1)):this.bce=0,d=d.replace(/[^0-9]/g,
"-"),d=d.split("-"),this.ye=this.bce===0?parseInt(d[0],10):-1*parseInt(d[0],10),this.mo=parseInt(d[1],10),this.mo_num=this.ye>0?(this.ye-1)*12+this.mo:-1*((Math.abs(this.ye)-1)*12+(12-(this.mo-1))),this.da=parseInt(d[2],10),this.ho=parseInt(d[3],10)||0,this.mi=parseInt(d[4],10)||0,this.se=parseInt(d[5],10)||0,this.rd=p.getRataDie(this),this.sec=a||c(this),this.date_display=f?f.toLowerCase().substr(0,2):"",this.jsDate=new Date(this.ye,this.mo-1,this.da,this.ho,this.mi,this.se,0),this.dateStr=j};var p=
f.TG_Date;p.getTimeUnitSerial=function(e,f){var c=0;switch(f){case "ye":c=e.ye;break;case "mo":c=e.mo_num;break;case "da":case "de":c=Math.ceil(e.ye/10);break;case "ce":c=Math.ceil(e.ye/100);break;case "thou":c=Math.ceil(e.ye/1E3);break;case "tenthou":c=Math.ceil(e.ye/1E4);break;case "hundredthou":c=Math.ceil(e.ye/1E5);break;case "mill":c=Math.ceil(e.ye/1E6);break;case "tenmill":c=Math.ceil(e.ye/1E7);break;case "hundredmill":c=Math.ceil(e.ye/1E8);break;case "bill":c=Math.ceil(e.ye/1E9)}return c};
p.getMonthDays=function(e,f){return p.isLeapYear(f)==!0&&e==2?29:p.monthsDayNums[e]};p.twentyFourToTwelve=function(e){var f={};f.ye=e.ye;f.mo=e.mo;f.da=e.da;f.ho=e.ho;f.mi=e.mi;f.ampm="am";e.ho?e.ho>=12?(f.ampm="pm",f.ho=e.ho>12?e.ho-12:12):e.ho==0?(f.ho=12,f.ampm="am"):f.ho=e.ho:(f.ho=12,f.mi=0,f.ampm="am");return f};p.getMonthAdj=function(e,f){var c=p.getDateFromMonthNum(e);switch(c.mo){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return c=Math.floor(f+f/28*3),{width:c,days:31};case 2:return p.isLeapYear(c.ye)==
!0?(c=Math.floor(f+f/28),{width:c,days:29}):{width:f,days:28};default:return c=Math.floor(f+f/28*2),{width:c,days:30}}};p.getDateFromMonthNum=function(e){var f=0;e>0?(f=e%12,f==0&&(f=12),e=Math.ceil(e/12)):(f=Math.abs(e)%12,f=12-f+1,f==13&&(f=1),e=-1*Math.ceil(Math.abs(e)/12));return{ye:e,mo:f}};p.getMonthWidth=function(e,f,c){var f=t/28,d;switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:d=3;break;case 4:case 6:case 9:case 11:d=2;break;case 2:d=p.isLeapYear(yr)==!0?1:0}return{width:Math.floor(c+
f*d),numDays:28+d}};p.getToday=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":00"};p.getMonthFromRemDays=function(e,f){var c=0,d=c=0,c=p.isLeapYear(f)?1:0;e<=31?(d=1,c=e):e>31&&e<=59+c?(d=2,c=e-(31+c)):e>59+c&&e<=90+c?(d=3,c=e-(59+c)):e>90+c&&e<=120+c?(d=4,c=e-(90+c)):e>120+c&&e<=151+c?(d=5,c=e-(120+c)):e>151+c&&e<=181+c?(d=6,c=e-(151+c)):e>181+c&&e<=212+c?(d=7,c=e-(181+c)):e>212+c&&e<=243+c?(d=8,c=e-(212+c)):e>243+c&&e<=
273+c?(d=9,c=e-(243+c)):e>273+c&&e<=304+c?(d=10,c=e-(273+c)):e>304+c&&e<=334+c?(d=11,c=e-(304+c)):(d=12,c=e-(334+c));return{mo:d,da:c}};p.getDateFromRD=function(f){if(e[f])return e[f];for(var n=Math.floor(f),c=Math.floor(n/146097)*400,d=n-Math.floor(n/146097)*146097,j=1,a=c+1,g=a+400;a<=g;a++)d>365?(d-=365,p.isLeapYear(a)&&(d-=1),j++):a=g;c+=j;d==0&&(d=1);d=p.getMonthFromRemDays(d,c);j=(f-n)*1440;n=Math.floor(j%60);j=Math.floor(j/60);p.isLeapYear(c)&&d.mo==2&&(d.da+=1);n=c+"-"+d.mo+"-"+d.da+" "+j+
":"+n+":00";return e[f]=n};p.getDateFromSec=function(e){if(n[e])return n[e];var f=p.getDateFromRD(e/86400);return n[e]=f};p.isLeapYear=function(e){return e%400==0?!0:e%100==0?!1:e%4==0?!0:!1};p.getRataDie=function(e){function f(a,c){if(q[a+"-"+c])return q[a+"-"+c];for(var d=0,e=a;e<c;e++)d+=p.isLeapYear(e)?366:365;return q[a+"-"+c]=d}function c(a,c){var d;switch(a){case 1:d=0;break;case 2:d=31;break;case 3:d=59;break;case 4:d=90;break;case 5:d=120;break;case 6:d=151;break;case 7:d=181;break;case 8:d=
212;break;case 9:d=243;break;case 10:d=273;break;case 11:d=304;break;case 12:d=334}a>2&&p.isLeapYear(c)&&(d+=1);return d}var d=e.ye,j=e.mo,e=e.da,a=0;if(u[d+"-"+j+"-"+e])return u[d+"-"+j+"-"+e];if(d>=0){d==0&&(d=1);var a=Math.floor(d/400)*146097,g=parseInt(f(d-d%400,d)),n=parseInt(c(j,d)),a=a+g+n+e-366}else d<0&&(a=p.getBCRataDie({ye:d,mo:j,da:e}));return u[d+"-"+j+"-"+e]=a};p.getBCRataDie=function(e){var f=e.ye,c=e.mo,e=e.da;if(y[f+"-"+c+"-"+e])return y[f+"-"+c+"-"+e];c==0&&(c=1);e==0&&(e=1);var d=
-1*((Math.abs(f)-1)*366+[0,335,306,275,245,214,184,153,122,92,61,31,0][c]+(p.monthsDayNums[c]-e+1));return y[f+"-"+c+"-"+e]=d};p.setCulture=function(e){jQuery.global.culture=jQuery.global.cultures[e];p.monthNames=s.merge([""],jQuery.global.culture.calendar.months.names);p.monthNamesAbbr=s.merge([""],jQuery.global.culture.calendar.months.namesAbbr);p.monthNamesLet=["","J","F","M","A","M","J","J","A","S","O","N","D"];p.monthsDayNums=[0,31,28,31,30,31,30,31,31,30,31,30,31,29];p.dayNames=jQuery.global.culture.calendar.days.names;
p.dayNamesAbbr=jQuery.global.culture.calendar.days.namesAbbr;p.dayNamesShort=jQuery.global.culture.calendar.days.namesShort;p.units=["da","mo","ye","de","ce","thou","tenthou","hundredthou","mill","tenmill","hundredmill","bill"];p.patterns=jQuery.global.culture.calendar.patterns};p.prototype={format:function(e,f){if(f==!0)switch(this.date_display.substr(0,2)){case "no":return"";case "ye":e="yyyy";break;case "mo":e="Y";break;case "da":e="D";break;case "ho":e="f";break;default:e="f"}return s.global.format(this.jsDate,
e)}}})(timeglider);(function(f){var s=f.levelHeight=10,u=jQuery;f.TG_Org=function(){this.blocks=[];this.ids=[];this.vis=[];this.tree=[];var f=this;this.addBlock=function(e,p){e.right=e.left+e.width;e.bottom=e.top+e.height;e.tickScope=p;f.blocks.push(e)};this.getBorg=function(){return this};this.getBlocks=function(){return this.blocks};this.getHTML=function(n){if(n=="sweep"){f.tree=[];for(var p=0;p<300;p++)f.tree[p]=[];this.vis=[]}this.blocks.sort(y);var h,m="",c="";b_htm=html="";b={};blength=this.blocks.length;for(var d=
title_adj=0;d<blength;d++)if(b=this.blocks[d],b.tickScope==n&&u.inArray(b.id,this.vis)==-1)if(this.vis.push(b.id),title_adj=0,b.html&&b.html.substr(0,4)=="<div")b_htm="<div style='left:"+b.left+"px' id='ev_"+b.id+"'"+b.html.substr(4),html+=b_htm;else{b.image?(b.image.display_class=="layout"&&(title_adj=54),m="<div class='timeglider-event-image-"+b.image.display_class+"'><img src='"+b.image.src+"' style='height:"+(title_adj-4)+"px'></div>"):m="";e(b,0);if(b.y_position>0)b.top=-1*b.y_position;b.fontsize<
10?b.opacity=b.fontsize/10:b.opacity=1;b.span==!0?(p="timeglider-event-spanning",h="<div class='timeglider-event-spanner' style='top:"+title_adj+"px;height:"+b.fontsize+"px;width:"+b.spanwidth+"px'></div>"):h=p="";c=b.icon?"<img class='timeglider-event-icon' src='"+b.icon+"' style='height:"+b.fontsize+"px;left:-"+(b.fontsize+2)+"px; top:"+title_adj+"px'>":"";html+="<div class='timeglider-timeline-event "+p+"' id='ev_"+b.id+"' style='width:"+b.width+"px;height:"+(title_adj-4)+"px;left:"+b.left+"px;opacity:"+
b.opacity+";top:"+b.top+"px;font-size:"+b.fontsize+"px;'>"+c+m+h+"<div class='timeglider-event-title' style='top:"+title_adj+"px'>"+b.title+"</div></div>"}return html};var y=function(e,f){var h=f.importance,m=e.importance;return h<m?-1:h>m?1:0},e=function(n,p){var h=!1,m=f.tree,c=m[p],d=p+1,j=!1,a=2;bump_ht=s;if(c!=void 0){for(a=0;a<c.length;a++){a:{h=c[a];if(!(n.left>h.right||n.right<h.left))if(n.left>=h.left&&n.left<=h.right||n.right>=h.left&&n.right<=h.right||n.right>=h.right&&n.left<=h.left||
n.right<=h.right&&n.left>=h.left){h=n.bottom<=h.bottom&&n.bottom>=h.top||n.top<=h.bottom&&n.top>=h.top||n.top==h.bottom&&n.top==h.top?!0:!1;break a}h=!1}if(h==!0){n.top-=bump_ht;n.bottom-=bump_ht;e(n,d);j=!0;break}}if(j==!1){n.top-=n.fontsize;c.push(n);a=Math.ceil(n.height/s);c=0;for(c=1;c<=a;c++)d=p+c,m[d].push(n)}}}}})(timeglider);(function(f){function s(f){function p(c,e){return function(){return e.apply(c,arguments)}}var h=new Image,m=f.id,c=h.src=f.src;h.onerror=p(h,function(){e.reportImageSize({id:f.id,src:c,error:!0})});h.onload=p(h,function(){e.reportImageSize({id:m,src:c,width:this.width,height:this.height})})}var u=f.TG_Date,q=jQuery,y={},e;f.TG_Timeline=Backbone.Model.extend({defaults:{title:"Untitled",events:[],legend:[]},_chewTimeline:function(n){e=n.mediator;y=e.options;var p={da:[],mo:[],ye:[],de:[],ce:[],thou:[],
tenthou:[],hundredthou:[],mill:[],tenmill:[],hundredmill:[],bill:[]},h=u.units;n.startSeconds=[];n.endSeconds=[];n.spans=[];n.hasImagesAbove=!1;if(!n.color)n.color="#333333";if(n.events){for(var m,c,d,j,a=n.events.length,g=0;g<a;g++){c=n.events[g];c.id?d=c.id:c.id=d="anon"+this.anonEventId++;m=c.date_display||c.date_limit||"da";c.date_display=m.toLowerCase().substr(0,2);c.startdateObj=new u(c.startdate,c.date_display);c.enddateObj=new u(c.enddate,c.date_display);c.icon=!c.icon||c.icon==="none"?"":
y.icon_folder+c.icon;c.titleWidth=f.getStringWidth(c.title);if(c.image){m=c.image_class||"layout";if(c.image_class=="above")n.hasImagesAbove=!0;c.image={id:c.id,src:c.image,display_class:m};s(c.image);e.imagesToSize++}n.startSeconds.push(c.startdateObj.sec);n.endSeconds.push(c.enddateObj.sec);c.enddateObj.sec>c.startdateObj.sec?(c.span=!0,n.spans.push({id:c.id,start:c.startdateObj.sec,end:c.enddateObj.sec})):c.span=!1;for(var G=h.length,z=0;z<G;z++)m=h[z],j=u.getTimeUnitSerial(c.startdateObj,m),p[m][j]!==
void 0?p[m][j].push(d):p[m][j]=[d];e.eventPool["ev_"+d]=c}h=q.merge(n.startSeconds,n.endSeconds);h=timeglider.getLowHigh(h);n.bounds={first:h.low,last:h.high}}if(n.legend.length>0){h=n.legend;for(c=0;c<h.length;c++);}n.display="expanded";n.dateHash=p;delete n.events;return n},initialize:function(e){this.set(this._chewTimeline(e))},validate:function(){}})})(timeglider);var stopautoscroll=1;
(function(f){var s=f.TG_Date,u="",q="",y={},e=jQuery,n={},p="",h,m;debug.trace=function(c,d){e("#"+d).text(c)};f.TG_TimelineView=function(c,d){var f=this;q=d;y=q.options;u="#"+c._id;p=c._id;this._views={PLACE:u,CONTAINER:u+" .timeglider-container",TIMELINE_MENU:u+" .timeglider-timeline-menu",TIMELINE_MENU_UL:u+" .timeglider-timeline-menu ul",TIMELINE_LIST_BT:u+" .timeglider-list-bt",SLIDER_CONTAINER:u+" .timeglider-slider-container",SLIDER:u+" .timeglider-slider",ZOOM_DISPLAY:u+" .timeglider-zoomlevel-display",
TRUCK:u+" .timeglider-truck",CENTERLINE:u+" .timeglider-centerline",TICKS:u+" .timeglider-ticks",HANDLE:u+" .timeglider-handle",FOOTER:u+" .timeglider-footer",FILTER_BT:u+" .timeglider-filter-bt",FILTER_BOX:u+" .timeglider-filter-box",TOOLS_BT:u+" .timeglider-tools-bt"};h=this._views.CONTAINER;m=this._views.TICKS;PLACE=this._views.PLACE;this._templates={event_modal:e.template(null,"<div class='tg-modal timeglider-ev-modal ui-widget-content' id='ev_${id}_modal'><div class='close-button-remove'></div><div class='startdate'>${startdate}</div><h4 id='title'>${title}</h4><p>{{html description}}</p><ul class='timeglider-ev-modal-links'>{{html links}}</ul></div>"),
event_modal_video:e.template(null,"<div class='tg-modal timeglider-ev-video-modal ui-widget-content' id='${id}_modal'><div class='close-button-remove'></div><iframe width = '100%' height='300' src='${video}'></iframe></div>"),timeline_modal:e.template(null,"<div class='tg-modal timeglider-timeline-modal ui-widget-content' id='tl_${id}_modal'><div class='close-button-remove'></div><h4 id='title'>${title}</h4><p>{{html description}}</p></div>"),filter_modal:e.template(null,"<div class='tg-modal timeglider-menu-modal timeglider-filter-box timeglider-menu-hidden'><div class='close-button'></div><h3>filter</h3><div class='timeglider-menu-modal-content'><div class='timeglider-formline'>show: <input type='text' class='timeglider-filter-include'></div><div class='timeglider-formline'>hide: <input type='text' class='timeglider-filter-exclude'></div><ul><li class='timeglider-filter-clear'>clear</li><li class='timeglider-filter-apply'>apply</li></ul></div><div class='timeglider-menu-modal-point-right'></div>"),
timeline_list_modal:e.template(null,"<div class='timeglider-menu-modal timeglider-timeline-menu timeglider-menu-hidden'><div class='close-button'></div><h3>timelines</h3><div class='timeglider-menu-modal-content'><ul></ul></div><div class='timeglider-menu-modal-point-right'></div>"),legend_modal:e.template(null,"<div class='timeglider-menu-modal timeglider-legend timeglider-menu-hidden'  id='${id}_legend'><div class='timeglider-menu-modal-content'><ul id='${id}' style='padding:0px; margin:0px;'>{{html legend_list}}</ul></div></div>")};
e(h).css("height",e(u).height());this.basicFontSize=y.basic_fontsize;y.show_footer==!1&&e(this._views.FOOTER).css("display","none");this.dragSpeed=0;this.dimensions=this.getWidgetDimensions();this.ticksHandleOffset=this.rightside=this.leftside=this.tickNum=0;this.timeoout_id=1;this.sliderActive=!1;this.ztop=1E3;this.filterBoxActivated=!1;this.buildSlider();this.setupFilter();e.subscribe("mediator.timelineDataLoaded",function(){e(".timeglider-loading").fadeOut(500)});e.subscribe("mediator.ticksOffsetChange",
function(){f.tickHangies();f.registerTitles();f.registerDragging()});e.subscribe("mediator.zoomLevelChange",function(){f.tickNum=0;f.leftside=0;var a=q.getZoomLevel();e(f._views.SLIDER).slider("value",f.invSliderVal(a));f.displayZoomLevel(a);f.castTicks("zoomLevelChange")});e.subscribe("mediator.ticksReadySignal",function(){q.ticksReady===!0&&f.freshTimelines()});e.subscribe("mediator.refreshSignal",function(){f.tickNum=0;f.leftside=0;f.castTicks("refreshSignal")});e.subscribe("mediator.ticksArrayChange",
function(){});e.subscribe("mediator.focusDateChange",function(){});e.subscribe("mediator.timelineListChangeSignal",function(){f.buildTimelineMenu()});e.subscribe("mediator.activeTimelinesChange",function(){e(f._views.TIMELINE_MENU_UL+" li").each(function(){var a=e(this).attr("id");e.inArray(a,q.activeTimelines)!=-1?e(this).addClass("activeTimeline"):e(this).removeClass("activeTimeline")})});e.subscribe("mediator.filterChange",function(){});e(".timeglider-pan-buttons div").mousedown(function(){var a=
e(this).attr("class")=="timeglider-pan-right"?-30:30;f.intervalMachine("pan",{type:"set",fn:f.pan,args:[a],intvl:30})}).mouseup(function(){f.intervalMachine("pan",{type:"clear",fn:f.pan,callback:"resetTicksHandle"})}).mouseout(function(){f.intervalMachine("pan",{type:"clear",fn:f.pan,callback:"resetTicksHandle"})});e(this._views.TRUCK).dblclick(function(a){var c=a.pageX-f.dimensions.container.offset.left-f.dimensions.container.width/2,d=q.getZoomInfo().spp,a=q.getFocusDate().sec,c=new s(Math.floor(a+
c*d)),a=new s(a);debug.trace("DBLCLICK:"+a.mo+"-"+a.ye+" DBLCLICK:"+c.mo+"-"+c.ye,"note")}).bind("mousewheel",function(a,c){var d=Math.ceil(-1*c*3),e=q.getZoomLevel();q.setZoomLevel(e+d);return!1});e(m).draggable({axis:"x",drag:function(){q.setTicksOffset(e(this).position().left);stopautoscroll=0},stop:function(){f.resetTicksHandle();f.registerDragging()}}).delegate(h+" .timeglider-timeline-event","click",function(){var a=e(this).attr("id"),c=q.eventPool[a];if(c.click_callback){var a=c.click_callback.split("."),
d=a[0];if(a.length==2)window[d][a[1]](c);else window[d](c)}else stopautoscroll=0,f.eventModal(a)}).delegate(".timeglider-timeline-event","mouseover",function(){var a=e(this).attr("id"),a=q.eventPool[a];debug.trace("hover, title:"+a.title,"note");f.eventHover(e(this),a)}).delegate(".timeglider-timeline-event","mouseout",function(){var a=e(this).attr("id"),a=q.eventPool[a];debug.trace("hover, title:"+a.title,"note");f.eventUnHover(e(this),a)}).delegate(".timeglider-event-collapsed","hover",function(){var a=
e(this).attr("id");debug.trace("collapsed, title:"+q.eventPool[a].title,"note")});e(PLACE).delegate(".close-button-remove","click",function(){var a=e(this).parent().attr("id");e("#"+a).remove()});e(h).delegate(".timeglider-more-plus","click",function(){q.zoom(-1)});e(h+" .timeglider-legend-all").live("click",function(){e(h+" .timeglider-legend li").each(function(){e(this).removeClass("tg-legend-icon-selected")});q.setFilters({origin:"legend",icon:"all"})});e.tmpl(f._templates.timeline_list_modal,
{}).appendTo(h);e(f._views.TIMELINE_LIST_BT).click(function(){e(f._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden").position({my:"right bottom",at:"right top",of:e(f._views.TIMELINE_LIST_BT),offset:"-8, -12"})});e(this._views.TIMELINE_MENU+" .close-button").live("click",function(){e(f._views.TIMELINE_MENU).toggleClass("timeglider-menu-hidden")});e(this._views.TOOLS_BT).click(function(){alert("I'm just a stand-in for the tools... ")});q.options.show_centerline===!0?e(this._views.CENTERLINE).css({height:f.dimensions.container.height,
left:f.dimensions.container.centerx}):e(this._views.CENTERLINE).css({display:"none"});if(e.support.touch){e("#"+p).addTouch();var a=document.getElementById(p);a.addEventListener("gesturestart",function(a){a.preventDefault();e("#output").append("<br>gesture zoom:"+q.getZoomLevel())},!1);a.addEventListener("gestureend",function(a){a.preventDefault();e("#output").append("<br>gesture end:"+q.getZoomLevel())},!1);a.addEventListener("gesturechange",function(a){a.preventDefault();e("#output").append("[l:r]")},
!1)}};f.TG_TimelineView.prototype={getWidgetDimensions:function(){var c=e(h),d=c.width(),f=Math.floor(d/2)+1,a=c.height(),g=Math.floor(a/2),n=c.position().left,c=c.offset(),m=y.show_footer==!0?e(this._views.FOOTER).height():0;return{container:{width:d,height:a,centerx:f,centery:g,left:n,offset:c},tick:{top:a-m-30},footer:{height:m}}},scaleToImportance:function(c,d){return c/d},displayZoomLevel:function(c){c>0&&y.display_zoom_level==!0&&e(this._views.ZOOM_DISPLAY).text(c)},doSomething:function(){alert("FOO DO, viewer")},
intervalMachine:function(c,d){var e=this;if(d.type==="clear"){if(clearInterval(n[c]),d.callback)e[d.callback]()}else n[c]=setInterval(function(){d.fn.apply(e,d.args)},d.intvl)},invSliderVal:function(c){return Math.abs(c-101)},pan:function(c){c=c||20;$t=e(m);newPos=$t.position().left+c;$t.css({left:newPos});q.setTicksOffset(newPos)},registerTitles:function(){var c,d,f,a,g,n,m,p,q,k,s,u=e(h).offset().left;e(".timeglider-event-spanning").each(function(){c=e(this).offset().left-u;d=e(this).outerWidth();
m=e(".timeglider-event-title",this);f=m.outerWidth()+5;a=m.siblings(".timeglider-event-spanner").outerWidth();a>f&&c<0&&Math.abs(c)<d-f&&m.css({marginLeft:-1*c+5})});e(".tg-timeline-envelope").each(function(){p=e(this).offset().left-u;q=e(".titleBar",this);k=e(".titleBar .timeline-title",this);g=q.position().left;s=g+p;q.outerWidth();f=q.outerWidth();n=-1*s;s<0&&k.css({marginLeft:n+5})})},registerDragging:function(){var c=q.startSec,d=e(m).position().left,f=q.getZoomInfo().spp,c=new s(c-d*f);q.setFocusDate(c)},
buildTimelineMenu:function(){var c,d=q.timelinePool,f=0;e(this._views.TIMELINE_MENU_UL+" li").remove();for(c in d){if(d.hasOwnProperty(c)){var a=d[c];e(this._views.TIMELINE_MENU_UL).append("<li class = 'timelineList' id='"+c+"'>"+a.title+"</li>");e("li#"+c).click(function(){q.toggleTimeline(e(this).attr("id"))})}f++}},buildSlider:function(){var c=q.getZoomLevel();if(y.min_zoom==y.max_zoom)e(this._views.SLIDER_CONTAINER).css("display","none");else{y.display_zoom_level==!0&&e("<div>").appendTo(this._views.SLIDER_CONTAINER).addClass("timeglider-zoomlevel-display").html("&nbsp;");
var d=this,c=d.invSliderVal(c),f=q.max_zoom,a=q.min_zoom;e(this._views.SLIDER).css("height",(1+f-a)*3).slider({steps:100,handle:e(".knob"),animate:300,orientation:"vertical",min:d.invSliderVal(f),max:d.invSliderVal(a),value:c,start:function(){d.sliderActive=!0},stop:function(){d.sliderActive=!1},change:function(){},slide:function(a,c){q.setZoomLevel(d.invSliderVal(c.value))}})}},eventHover:function(c,d){var f=e(".timeglider-event-hover-info");debug.log("hover display:"+d.date_display);d.date_display!=
"no"&&f.position({my:"left bottom",at:"left top",of:c,offset:"1, -10",collision:"flip flip"}).text(d.startdateObj.format("D",!0));c.addClass("tg-event-hovered")},eventUnHover:function(c){e(".timeglider-event-hover-info").css("left","-1000px");c.removeClass("tg-event-hovered")},setupFilter:function(){var c=this;e.tmpl(c._templates.filter_modal,{}).appendTo(c._views.CONTAINER);e(c._views.FILTER_BT).click(function(){var d=e(this),f=c._views.FILTER_BOX;if(c.filterBoxActivated==!1){c.filterBoxActivated=
!0;var a=e(f+" .timeglider-filter-apply"),g=e(".timeglider-filter-box .close-button"),h=e(f+" .timeglider-filter-clear"),n="",m="";a.click(function(){n=e(f+" .timeglider-filter-include").val();m=e(f+" .timeglider-filter-exclude").val();q.setFilters({origin:"clude",include:n,exclude:m});e(f).toggleClass("timeglider-menu-shown")});g.click(function(){e(f).toggleClass("timeglider-menu-hidden")});h.click(function(){q.setFilters({origin:"clude",include:"",exclude:""});e(f+" .timeglider-filter-include").val("");
e(f+" .timeglider-filter-exclude").val("");e(f).toggleClass("timeglider-menu-shown")})}e(f).toggleClass("timeglider-menu-hidden").css("z-index",c.ztop++).position({my:"right bottom",at:"right top",of:d,offset:"-8, -12"})})},clearTicks:function(){this.tickNum=this.leftside=0;e(m).css("left",0).html("<div class='timeglider-handle'></div>")},castTicks:function(){this.clearTicks();q.getZoomLevel();var c=q.getFocusDate(),d=q.getZoomInfo().width,d=Math.ceil(this.dimensions.container.width/d)+4,e="l";q.setTicksReady(!1);
this.addTick({type:"init",focus_date:c});for(c=1;c<=d;c+=1)this.addTick({type:e}),e=e=="l"?"r":"l";q.setTicksReady(!0)},addTick:function(c){var d=0,f=0,a=f=0,g=0,h=0,n="",h={},a={},p={},u={},h={},p=q.getZoomInfo().unit,u=q.getZoomInfo().width,g=q.getFocusDate(),a=parseInt(this.dimensions.tick.top),g=q.addToTicksArray({type:c.type,unit:p},g),k="",y=0,n="";if(p=="mo")h=s.getMonthAdj(g,u),u=h.width,d=h.days;this.tickNum++;c.type=="init"?(h=this.tickOffsetFromDate(q.getZoomInfo(),q.getFocusDate(),u),
this.leftside=f=Math.ceil(this.dimensions.container.centerx+h),this.rightside=f+u):c.type=="l"?this.leftside=f=Math.floor(this.leftside-u):c.type=="r"&&(f=Math.floor(this.rightside),this.rightside+=u);q.getTickBySerial(g).width=u;q.getTickBySerial(g).left=f;n=this._views.PLACE+"_"+p+"_"+g+"-"+this.tickNum;h=e("<div class='timeglider-tick' id='"+n+"'><div class='timeglider-tick-label' id='label'></div></div>").appendTo(m);h.css({width:u,left:f,top:a});a=this.getTickMarksInfo({unit:p,width:u});a=d||
a.tperu;f=u/a;if(f>5){for(var c=Raphael(n,u,30),L="",d=0;d<a;++d)n=d*f,L+="M"+n+" 20 L"+n+" 30",p=="da"&&f>16&&(n=this.getHourLabelFromHour(y,f),k+="<div class='timeglider-tick-hour-label' style='width:"+(f-4)+"px'>"+n+"</div>",y++);c.path(L).attr({stroke:"#333","stroke-width":1})}p=="da"&&f>32&&h.append("<div style='position:absolute;top:14px;left:0'>"+k+"</div>");p={unit:p,width:u,serial:g};u=this.getDateLabelForTick(p);h.children("#label").text(u);return p},getHourLabelFromHour:function(c,d){var e=
"",e=e="",e=c>12?c-12:c;e==0&&(e=12);return e+(d>60?":00":"")+(c>11?" pm":" am")},getTickMarksInfo:function(c){switch(c.unit){case "da":c=24;break;case "mo":c=30;break;case "ye":c=12;break;default:c=10}return{tperu:c}},getDateLabelForTick:function(c){var d=c.serial,e=c.width;switch(c.unit){case "bill":if(d==1)return"1";return d-1+" bya";case "hundredmill":if(d==1)return"1";return(d-1)*100+" mya";case "tenmill":if(d==1)return"1";return(d-1)*10+" mya";case "mill":if(d==1)return"1";return d-1+" mya";
case "hundredthou":if(d==1)return"1";return d-1+"00,000";case "tenthou":if(d==1)return"1";return d-1+"0000";case "thou":if(d==1)return"1";return d-1+"000";case "ce":if(d==1)return"1";return d-1+"00";case "de":return d*10+"er";case "ye":return d;case "mo":return c=s.getDateFromMonthNum(d),e<120?s.monthNamesAbbr[c.mo]+" "+c.ye:s.monthNames[c.mo]+", "+c.ye;case "da":return c=new s(s.getDateFromRD(d)),e<120?s.monthNamesAbbr[c.mo]+" "+c.da+", "+c.ye:s.monthNames[c.mo]+" "+c.da+", "+c.ye;default:return c.unit+
":"+d+":"+e}},tickHangies:function(){var c=e(m).position().left,d=this.rightside+c-this.dimensions.container.width;this.leftside+c>-100?(c=this.addTick({type:"l"}),this.appendTimelines(c)):d<100&&(c=this.addTick({type:"r"}),this.appendTimelines(c))},tickOffsetFromDate:function(c,d,e){switch(c.unit){case "da":d=d.ho/24+d.mi/1440;e*=d;break;case "mo":c=s.getMonthDays(d.mo,d.ye);d=(d.da-1)/c+d.ho/(24*c)+d.mi/(1440*c);e*=d;break;case "ye":d=((d.mo-1)*30+d.da)/365;e*=d;break;case "de":d=d.ye%10/10+d.mo/
120;e*=d;break;case "ce":d=d.ye%100/100+d.mo/1200;e*=d;break;case "thou":d=d.ye%1E3/1E3;e*=d;break;case "tenthou":d=d.ye%1E4/1E4;e*=d;break;case "hundredthou":d=d.ye%1E5/1E5;e*=d;break;default:e=0}return-1*e},resetTicksHandle:function(){e(this._views.HANDLE).offset({left:e(h).offset().left})},easeOutTicks:function(){Math.abs(this.dragSpeed)>5&&debug.trace("ticks stopped!","note")},getTimelineEventsByTick:function(c){var d=c.tick.unit,e=c.tick.serial,c=c.timeline.dateHash;return c[d][e]&&c[d][e].length>
0?c[d][e]:0},setTimelineProp:function(c,d,e){q.timelinePool[c][d]=e},getTimelineProp:function(c,d){return q.timelinePool[c][d]},passesFilters:function(c,d){var f=!0,a="",g=[],h,a="",g=[];if(d<c.low_threshold||d>c.high_threshold)return!1;if(a=q.filters.include){g=a.split(",");f=!1;for(h=0;h<g.length;h++)a=RegExp(e.trim(g[h]),"i"),c.title.match(a)&&(f=!0)}if(a=q.filters.exclude){g=a.split(",");for(h=0;h<g.length;h++)a=RegExp(e.trim(g[h]),"i"),c.title.match(a)&&(f=!1)}a=c.icon;q.filters.legend.length>
0&&e.inArray(a,q.filters.legend)==-1&&(f=!1);return f},freshTimelines:function(){var c,d,f,a,g=q.activeTimelines,n=q.ticksArray,p="",s,u=this;d="";var k=u.dimensions.container.centerx,y=u.dimensions.container.width,L=q.getFocusDate().sec,v=q.getZoomInfo().spp;q.getZoomInfo();d=[];var o=[],y=L-Math.floor(v*(y/2));d="";for(var w,r=0,C=u.dimensions.container.height,B=r=0;B<g.length;B++){c=q.timelinePool[g[B]];w=c.display;r=c.top?parseInt(c.top.replace("px","")):C-30;d=c.legend.length>0?"<span class='tg-timeline-legend-bt'>legend</span>":
"";$tl=e("<div class='tg-timeline-envelope' id='"+c.id+"'><div class='titleBar'><div class='timeline-title'>"+c.title+"<div class='tg-timeline-env-buttons'><span class='timeline-info'>info</span>"+d+"</div></div></div></div>").appendTo(m);$tl.draggable({axis:"y",handle:".titleBar",stop:function(){u.setTimelineProp(c.id,"top",e(this).css("top"));q.refresh()}}).css("top",r);d=$tl.height();e(h+" .tg-timeline-envelope#"+c.id+" .titleBar .expand-collapse").click(function(){u.expandCollapseTimeline(c.id)});
e(h+" .tg-timeline-envelope#"+c.id+" .titleBar .timeline-info").click(function(){u.timelineModal(c.id)});e(h+" .tg-timeline-envelope#"+c.id+" .titleBar .tg-timeline-legend-bt").click(function(){u.legendModal(c.id)});s=$tl.children(".titleBar");f=k+(c.bounds.first-L)/v;a=k+(c.bounds.last-L)/v;s.css({top:d,left:f,width:a-f});if(w=="expanded")c.borg=p=new timeglider.TG_Org;for(f=0;f<n.length;f++)d=this.getTimelineEventsByTick({tick:n[f],timeline:c}),e.merge(o,d);for(f=0;f<c.spans.length;f++)d=c.spans[f],
d.start<y&&d.end>y&&e.inArray(d.id,o)==-1&&o.unshift(d.id);d=this.compileTickEventsAsHtml(c,o,0,"sweep");r=c.hasImagesAbove?r-56:r;if(w=="expanded")d=p.getHTML("sweep",r),c.borg=p.getBorg();d!="undefined"&&$tl.append(d);this.registerEventImages($tl)}u.registerTitles()},appendTimelines:function(c){for(var d=q.activeTimelines,f,a="",g=0;g<d.length;g++)f=q.timelinePool[d[g]],idArr=this.getTimelineEventsByTick({tick:c,timeline:f}),a=this.compileTickEventsAsHtml(f,idArr,c.serial,"append"),f.display=="expanded"&&
(a=f.borg.getHTML(c.serial,f.top)),f=e(".tg-timeline-envelope#"+f.id).append(a),this.registerEventImages(f)},compileTickEventsAsHtml:function(c,d,f,a){var g;g=0;var h=this.dimensions.container.centerx,n=c.display,p=$tl.height();stuff="";foSec=q.startSec;spp=q.getZoomInfo().spp;zl=q.getZoomInfo().level;buffer=20;g=0;borg=c.borg;block_arg="sweep";a=="append"&&(block_arg=f);for(f=0;f<d.length;f++)if(ev=q.eventPool["ev_"+d[f]],this.passesFilters(ev,zl)===!0)if(g=h+(ev.startdateObj.sec-foSec)/spp,n=="expanded"){impq=
c.size_importance!==!1?this.scaleToImportance(ev.importance,zl):1;ev.width=ev.titleWidth*impq+buffer;ev.fontsize=this.basicFontSize*impq;ev.left=g;ev.spanwidth=0;if(ev.span==!0&&(ev.spanwidth=(ev.enddateObj.sec-ev.startdateObj.sec)/spp,ev.spanwidth>ev.width))ev.width=ev.spanwidth;g=0;if(ev.image&&ev.image.display_class==="layout")g=52,ev.width=ev.image.width>ev.width?ev.image.width:ev.width;ev.height=Math.ceil(ev.fontsize)+g;ev.top=p-ev.height;borg.addBlock(ev,block_arg)}else n=="collapsed"&&(stuff+=
"<div id='ev_"+ev.id+"' class='timeglider-event-collapsed' style='top:"+(p-2)+"px;left:"+g+"px'></div>");this.legendModal("ingpsy");var s=function(){$t=e(m);newPos=$t.position().left-1*stopautoscroll;$t.css({left:newPos});q.setTicksOffset(newPos);if(newPos<-1300||newPos>300)stopautoscroll*=-1;stopautoscroll!=0&&window.setTimeout(s,250)};window.setTimeout(s,200);return n=="collapsed"?stuff:""},registerEventImages:function(c){e(".timeglider-event-image-bar").each(function(){e(this).position({my:"top",
at:"bottom",of:c,offset:"0, 0"}).css("left",0)});e(".timeglider-event-image-above").each(function(){e(this).position({my:"top",at:"top",of:e(h),offset:"0, 12"}).css("left",0)})},expandCollapseTimeline:function(c){c=q.timelinePool[c];c.display=c.display=="expanded"?"collapsed":"expanded";q.refresh()},timelineModal:function(c){e("#tl_"+c+"_modal").remove();var d=q.timelinePool[c];e.tmpl(this._templates.timeline_modal,{title:d.title,description:d.description,id:c}).appendTo(h).css("z-index",this.ztop++).position({my:"left top",
at:"left top",of:this._views.CONTAINER,offset:"32, 32",collision:"fit fit"}).draggable({stack:".timeglider-modal"})},createEventLinksMenu:function(c){if(!c)return"";var d="",e=0,a="",f="";if(typeof c=="string")d="<li><a href='"+c+"' target='_blank'>mehr...</a></li>";else if(typeof c=="object")for(e=0;e<c.length;e++)a=c[e].url,f=c[e].label,d+="<li><a href='"+a+"' target='_blank'>"+f+"</a></li>";return d},eventModal:function(c){e("#ev_"+c+"_modal").remove();var d=this,f=e("#"+c),a=d._templates.event_modal;
ev=q.eventPool[c];ev_img=ev.image&&ev.image.src?"<img src='"+ev.image.src+"' title='"+ev.hint+"'>":"";links=this.createEventLinksMenu(ev.link);templ_obj={title:ev.title,description:ev_img+ev.description,id:c,startdate:ev.startdateObj.format("D",!0),links:links,video:ev.video};if(ev.video)a=d._templates.event_modal_video,templ_obj.video=ev.video;e.tmpl(a,templ_obj).appendTo(PLACE).css("z-index",d.ztop++).position({my:"right center",at:"left center",of:f,offset:"-12, 40",collision:"flip fit"}).draggable().hover(function(){e(this).css("z-index",
d.ztop++)})},legendModal:function(c){var d=q.timelinePool[c].legend,f,a,g,h="";for(f=0;f<d.length;f++)a=y.icon_folder+d[f].icon,g=d[f].title,h+="<li style='padding-right:10px;'><img src='"+a+"'>"+g+"</li>";c={id:c,legend_list:h};e(PLACE+" .timeglider-legend").remove();e.tmpl(this._templates.legend_modal,c).appendTo(PLACE).toggleClass("timeglider-menu-hidden")},parseHTMLTable:function(c){var d={},f=+new Date,a=[];e("#"+c).find("tr").each(function(c){var h=e(this).children(),n;c===0?a=h.map(function(){return e(this).attr("class").replace(/^.*?\btg-(\S+)\b.*?$/,
"$1")}).get():(n={},h.each(function(c){n[a[c]]=e(this).text()}),d["prefix"+f++]=n)});return d}};f.zoomTree=[{},{unit:"da",width:35E3,level:1,label:"5 hours"},{unit:"da",width:17600,level:2,label:"7 hours"},{unit:"da",width:8800,level:3,label:"10 hours"},{unit:"da",width:4400,level:4,label:"12 hours"},{unit:"da",width:2200,level:5,label:"14 hours"},{unit:"da",width:1100,level:6,label:"17 hours"},{unit:"da",width:550,level:7,label:"22 hours"},{unit:"da",width:432,level:8,label:"1 DAY"},{unit:"da",width:343,
level:9,label:"1.5 days"},{unit:"da",width:272,level:10,label:"2 days"},{unit:"da",width:216,level:11,label:"2.5 days"},{unit:"da",width:171,level:12,label:"3 days"},{unit:"da",width:136,level:13,label:"3.5 days"},{unit:"da",width:108,level:14,label:"4 days"},{unit:"mo",width:2509,level:15,label:"6 days"},{unit:"mo",width:1945,level:16,label:"1 WEEK"},{unit:"mo",width:1508,level:17,label:"10 days"},{unit:"mo",width:1169,level:18,label:"2 weeks"},{unit:"mo",width:913,level:19,label:"2.5 weeks"},{unit:"mo",
width:719,level:20,label:"3 weeks"},{unit:"mo",width:566,level:21,label:"3.5 weeks"},{unit:"mo",width:453,level:22,label:"1 MONTH"},{unit:"mo",width:362,level:23,label:"5.5 weeks"},{unit:"mo",width:290,level:24,label:"7 weeks"},{unit:"mo",width:232,level:25,label:"2 months"},{unit:"mo",width:186,level:26,label:"2.5 months"},{unit:"mo",width:148,level:27,label:"3 months"},{unit:"mo",width:119,level:28,label:"4 months"},{unit:"mo",width:95,level:29,label:"5 months"},{unit:"mo",width:76,level:30,label:"6 months"},
{unit:"ye",width:723,level:31,label:"9 months"},{unit:"ye",width:573,level:32,label:"1 YEAR"},{unit:"ye",width:455,level:33,label:"1.25 years"},{unit:"ye",width:361,level:34,label:"1.5 years"},{unit:"ye",width:286,level:35,label:"2 years"},{unit:"ye",width:227,level:36,label:"2.5 years"},{unit:"ye",width:179,level:37,label:"3 years"},{unit:"ye",width:142,level:38,label:"4 years"},{unit:"ye",width:113,level:39,label:"5 years"},{unit:"ye",width:89,level:40,label:"6 years"},{unit:"de",width:705,level:41,
label:"8 years"},{unit:"de",width:559,level:42,label:"10 years"},{unit:"de",width:443,level:43,label:"13 years"},{unit:"de",width:302,level:44,label:"16 years"},{unit:"de",width:240,level:45,label:"20 years"},{unit:"de",width:190,level:46,label:"25 years"},{unit:"de",width:150,level:47,label:"30 years"},{unit:"de",width:120,level:48,label:"40 years"},{unit:"de",width:95,level:49,label:"50 years"},{unit:"de",width:76,level:50,label:"65 years"},{unit:"ce",width:600,level:51,label:"80 years"},{unit:"ce",
width:480,level:52,label:"100 years"},{unit:"ce",width:381,level:53,label:"130 years"},{unit:"ce",width:302,level:54,label:"160 years"},{unit:"ce",width:240,level:55,label:"200 years"},{unit:"ce",width:190,level:56,label:"250 years"},{unit:"ce",width:150,level:57,label:"300 years"},{unit:"ce",width:120,level:58,label:"400 years"},{unit:"ce",width:95,level:59,label:"500 years"},{unit:"ce",width:76,level:60,label:"600 years"},{unit:"thou",width:603,level:61,label:"1000 years"},{unit:"thou",width:478,
level:62,label:"1200 years"},{unit:"thou",width:379,level:63,label:"1800 years"},{unit:"thou",width:301,level:64,label:"160 years"},{unit:"thou",width:239,level:65,label:"xxx years"},{unit:"thou",width:190,level:66,label:"xxx years"},{unit:"thou",width:150,level:67,label:"xxx years"},{unit:"thou",width:120,level:68,label:"xxx years"},{unit:"thou",width:95,level:69,label:"8,000 years"},{unit:"thou",width:76,level:70,label:"10,000 years"},{unit:"tenthou",width:603,level:71,label:"15,000 years"},{unit:"tenthou",
width:358,level:72,label:"20,000 years"},{unit:"tenthou",width:213,level:73,label:"30,000 years"},{unit:"tenthou",width:126,level:74,label:"60,000 years"},{unit:"tenthou",width:76,level:75,label:"100,000 years"},{unit:"hundredthou",width:603,level:76,label:"180,000 years"},{unit:"hundredthou",width:358,level:77,label:"300,000 years"},{unit:"hundredthou",width:213,level:78,label:"500,000 years"},{unit:"hundredthou",width:126,level:79,label:"800,000 years"},{unit:"hundredthou",width:76,level:80,label:"1 million years"},
{unit:"mill",width:603,level:81,label:"1.2 million years"},{unit:"mill",width:358,level:82,label:"2 million years"},{unit:"mill",width:213,level:83,label:"3 million years"},{unit:"mill",width:126,level:84,label:"5 million years"},{unit:"mill",width:76,level:85,label:"10 million years"},{unit:"tenmill",width:603,level:86,label:"15 million years"},{unit:"tenmill",width:358,level:87,label:"30 million years"},{unit:"tenmill",width:213,level:88,label:"50 million years"},{unit:"tenmill",width:126,level:89,
label:"80 million years"},{unit:"tenmill",width:76,level:90,label:"100 million years"},{unit:"hundredmill",width:603,level:91,label:"120 million years"},{unit:"hundredmill",width:358,level:92,label:"200 million years"},{unit:"hundredmill",width:213,level:93,label:"300 million years"},{unit:"hundredmill",width:126,level:94,label:"500 million years"},{unit:"hundredmill",width:76,level:95,label:"1 billion years"},{unit:"bill",width:603,level:96,label:"15 million years"},{unit:"bill",width:358,level:97,
label:"30 million years"},{unit:"bill",width:213,level:98,label:"50 million years"},{unit:"bill",width:126,level:99,label:"80 million years"},{unit:"bill",width:76,level:100,label:"100 billion years"}];f.calculateSecPerPx=function(c){for(var d=1;d<c.length;d++){var e=c[d],a=0;switch(e.unit){case "da":a=86400;break;case "mo":a=2419200;break;case "ye":a=31536E3;break;case "de":a=31536E4;break;case "ce":a=31536E5;break;case "thou":a=31536E6;break;case "tenthou":a=31536E7;break;case "hundredthou":a=31536E8;
break;case "mill":a=31536E9;break;case "tenmill":a=31536E10;break;case "hundredmill":a=31536E11;break;case "bill":a=31536E12}e.spp=a/parseInt(e.width)}}(f.zoomTree);f.getStringWidth=function(c){if(c)return e("#timeglider-measure-span").html(c).width()}})(timeglider);(function(f){var s={},u=f.TG_Date,q={},y=jQuery;f.TimelineCollection=Backbone.Collection.extend({model:timeglider.TG_Timeline});f.TG_Mediator=function(e){this.options=q=e;this._focusDate={};this._zoomInfo={};this._zoomLevel=1;this.ticksReady=!1;this.ticksArray=[];this.startSec=0;this.activeTimelines=[];this.max_zoom=q.max_zoom;this.min_zoom=q.min_zoom;this.fixed_zoom=this.max_zoom==this.min_zoom?!0:!1;this.gesturing=!1;this.gestureStartScale=this.gestureStartZoom=0;this.filters={include:"",exclude:"",
legend:[]};this.eventPool=[];this.timelinePool={};this.imagesToSize=this.imagesSized=0;this.timelineDataLoaded=!1;this.foo="bark";this.initial_timeline_id=q.initial_timeline_id||"";this.sole_timeline_id="";if(q.max_zoom===q.min_zoom)this.fixed_zoom=q.min_zoom;s=this};f.TG_Mediator.prototype={gotoDate:function(e){this.setFocusDate(new u(e));this.refresh();return!0},gotoDateZoom:function(e,f){this.setFocusDate(new u(e));this.setZoomLevel(f)==!1&&this.refresh()},zoom:function(e){e=this.getZoomLevel()+
parseInt(e);debug.log("mediator zoom:"+e);this.setZoomLevel(e)},loadTimelineData:function(e){var f=this;e?(debug.log("HELLO??"),typeof e==="object"?f.parseData(e):e.substr(0,1)=="#"?(debug.log("IT'S A TABLE!"),e=[f.getTableTimelineData(e)],f.parseData(e)):y.getJSON(e,function(e){f.parseData(e)})):(this.timelineDataLoaded=!0,this.setZoomLevel(Math.floor((this.max_zoom+this.min_zoom)/2)),this.tryLoading())},getTableTimelineData:function(e){var f={},p=0,h=[],m,c,d="",j=y(e);f.id=e.substr(1);f.title=
j.attr("title")||"untitled";f.description=j.attr("description")||"";f.focus_date=j.attr("focus_date")||u.getToday;f.initial_zoom=j.attr("initial_zoom")||20;f.events=[];j.find("tr").each(function(a){var e=y(this).children(),j;a===0?h=e.map(function(){return y(this).attr("class").replace(/^.*?\btg-(\S+)\b.*?$/,"$1")}).get():(j={},e.each(function(a){m=h[a];c=y(this).text();j[m]=c}),d="ev_"+p++,j.id=d,f.events.push(j))});j.css("display","none");return f},parseData:function(e){for(var f=0,p=e.length,h=
{},h={},m=0;m<p;m++)h=e[m],h.mediator=this,h=(new timeglider.TG_Timeline(h)).toJSON(),h.id.length>0&&(f++,this.swallowTimeline(h));f===0?alert("ERROR loading data: Check JSON with jsonLint"):(this.timelineDataLoaded=!0,this.tryLoading())},tryLoading:function(){var e=this.timelineDataLoaded==!0;this.imagesSized==this.imagesToSize&&e&&(this.setInitialTimelines(),y.publish("mediator.timelineDataLoaded"))},swallowTimeline:function(e){this.sole_timeline_id=e.id;this.timelinePool[e.id]=e;y.publish("mediator.timelineListChangeSignal")},
setInitialTimelines:function(){var e=this.initial_timeline_id||this.sole_timeline_id;debug.log("TID:"+e);e&&setTimeout(function(){s.toggleTimeline(e)},1E3)},refresh:function(){this.startSec=this._focusDate.sec;y.publish("mediator.refreshSignal")},setTicksReady:function(e){this.ticksReady=e;e===!0&&y.publish("mediator.ticksReadySignal")},getFocusDate:function(){return this._focusDate},setFocusDate:function(e){if(e!=this._focusDate)this._focusDate=e,debug.trace("setting fd:"+e.dateStr,"note")},getZoomLevel:function(){return parseInt(this._zoomLevel)},
setZoomLevel:function(e){return e<=this.max_zoom&&e>=this.min_zoom?(this.startSec=this._focusDate.sec,e!=this._zoomLevel?(this._zoomLevel=e,this._zoomInfo=timeglider.zoomTree[e],y.publish("mediator.zoomLevelChange"),!0):!1):!1},getZoomInfo:function(){return this._zoomInfo},setFilters:function(e){switch(e.origin){case "clude":this.filters.include=e.include;this.filters.exclude=e.exclude;break;case "legend":var f=e.icon;f=="all"?(this.filters.legend=[],y.publish("mediator.legendAll")):y.inArray(f,this.filters.legend)==
-1?this.filters.legend.push(f):(e=[],e=y.grep(this.filters.legend,function(e){return e!=f}),this.filters.legend=e)}y.publish("mediator.filtersChange");this.refresh()},getTicksOffset:function(){return this._ticksOffset},setTicksOffset:function(e){this._ticksOffset=e;y.publish("mediator.ticksOffsetChange")},getTickBySerial:function(e){for(var f=this.ticksArray,p=f.length,h=0;h<p;h++){var m=f[h];if(m.serial==e)return m}return!1},addToTicksArray:function(e,f){e.type=="init"?(e.serial=u.getTimeUnitSerial(f,
e.unit),this.ticksArray=[e]):e.type=="l"?(e.serial=this.ticksArray[0].serial-1,this.ticksArray.unshift(e)):(e.serial=this.ticksArray[this.ticksArray.length-1].serial+1,this.ticksArray.push(e));y.publish("mediator.ticksArrayChange");return e.serial},toggleTimeline:function(e){var f=this.timelinePool[e],p=y.inArray(e,this.activeTimelines);p==-1?(this.activeTimelines.push(e),this.setFocusDate(new u(f.focus_date)),this.setZoomLevel(f.initial_zoom)):this.activeTimelines.splice(p,1);this.refresh();y.publish("mediator.activeTimelinesChange")},
reportImageSize:function(e){var f=s.eventPool["ev_"+e.id];e.error?(f.image={},debug.log("WHOOPS: MISSING IMAGE: "+e.src)):(f.image.width=e.width,f.image.height=e.height);this.imagesSized++;this.imagesSized==this.imagesToSize&&this.tryLoading()}};f.getLowHigh=function(e){var f,p,h=parseFloat(e[0]),m=h;for(f=0;f<e.length;f++)p=parseFloat(e[f]),p<m&&(m=p),p>h&&(h=p);return{high:h,low:m}};f.validateOptions=function(e){this.optionsMaster={initial_focus:{type:"date"},editor:{type:"string"},backgroundColor:{type:"color"},
backgroundImage:{type:"color"},min_zoom:{type:"number",min:1,max:100},max_zoom:{type:"number",min:1,max:100},initial_zoom:{type:"number",min:1,max:100},show_centerline:{type:"boolean"},display_zoom_level:{type:"boolean"},data_source:{type:"url"},basic_fontsize:{type:"number",min:9,max:100},mouse_wheel:{type:"string",possible:["zoom","pan"]},initial_timeline_id:{type:"string"},icon_folder:{type:"string"},show_footer:{type:"boolean"},display_zoom_level:{type:"boolean"}};var f=this,p="";y.each(e,function(e,
m){if(f.optionsMaster[e])switch(f.optionsMaster[e].type){case "string":typeof m!="string"&&(p+=e+" needs to be a string.\n");f.optionsMaster[e].possible&&y.inArray(m,f.optionsMaster[e].possible)==-1&&(p+=e+" must be: "+f.optionsMaster[e].possible.join(" or "));break;case "number":typeof m!="number"&&(p+=m+" needs to be a number.\n");f.optionsMaster[e].min&&m<f.optionsMaster[e].min&&(p+=e+" must be greater than or equal to "+f.optionsMaster[e].min+"\n");f.optionsMaster[e].max&&m>f.optionsMaster[e].max&&
(p+=e+" must be less than or equal to "+f.optionsMaster[e].max+"\n");break;case "boolean":typeof m!="boolean"&&(p+=m+" needs to be a number.\n")}});return p}})(timeglider);(function(f){var s,u=timeglider,q=timeglider.TG_Date;f.widget("timeglider.timeline",{options:{initial_focus:u.TG_Date.getToday(),editor:"none",min_zoom:1,max_zoom:100,show_centerline:!0,data_source:"",culture:"en",basic_fontsize:12,mouse_wheel:"zoom",initial_timeline_id:"",icon_folder:"js/timeglider/icons/",show_footer:!0,display_zoom_level:!0},_create:function(){this._id=f(this.element).attr("id");this.element.html("<div class='timeglider-container'><div class='timeglider-loading'>loading</div><div class='timeglider-centerline'></div><div class='timeglider-truck' id='tg-truck'><div class='timeglider-ticks'><div class='timeglider-handle'></div></div></div><div class='timeglider-slider-container'><div class='timeglider-slider'></div><div class='timeglider-pan-buttons'><div class='timeglider-pan-left'></div><div class='timeglider-pan-right'></div></div></div><div class='timeglider-footer'><div class='timeglider-logo'></div></div><div class='timeglider-event-hover-info'></div></div><span id='timeglider-measure-span'></span>")},
_init:function(){var f=timeglider.validateOptions(this.options);f==""?(u.TG_Date.setCulture(this.options.culture),s=new u.TG_Mediator(this.options),new u.TG_TimelineView(this,s),s.setFocusDate(new q(this.options.initial_focus)),s.loadTimelineData(this.options.data_source)):alert("Rats. There's a problem with your widget settings:"+f)},gotoDate:function(f){s.gotoDate(f)},gotoDateZoom:function(f,e){s.gotoDateZoom(f,e)},zoom:function(f){switch(f){case "in":f=-1;break;case "out":f=1}if(f>99||f<-99)return!1;
s.zoom(f)},destroy:function(){f.Widget.prototype.destroy.apply(this,arguments);f(this.element).html("")}})})(jQuery);
